import{a as m,j as e,f as o}from"./index-BcJ69802.js";import{P as p}from"./PageHeader-DpZdVOoR.js";import{D as u}from"./DataCard-CrT-k-jq.js";import{M as i}from"./MetricCard-CjdTriRj.js";import"./dialog-C86vlKxl.js";import"./input--Twqmmfi.js";import{b as g}from"./useCrmData-SS9oVxj_.js";import{D as v}from"./dollar-sign-Dm3x_983.js";import{T as b}from"./target-CWgt0fq7.js";import{T as f}from"./trending-up-DHCZe2ia.js";function R(){const{deals:t,isLoading:l}=g(),n=m(),c=t.reduce((a,s)=>a+s.value,0),d=t.filter(a=>a.stage==="won").reduce((a,s)=>a+s.value,0),x=t.length>0?t.filter(a=>a.stage==="won").length/t.length*100:0;return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(p,{title:"Sales Pipeline",subtitle:"Track and manage active deals across stages."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(i,{label:"Total Pipeline Value",value:o(c),icon:v,color:"blue",isLoading:l}),e.jsx(i,{label:"Closed Won (YTD)",value:o(d),icon:b,color:"emerald",isLoading:l}),e.jsx(i,{label:"Win Rate",value:`${x.toFixed(1)}%`,icon:f,color:"purple",isLoading:l})]}),e.jsx(u,{title:"Active Deals by Stage",isLoading:l,className:"bg-transparent border-0 shadow-none",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 no-scrollbar",children:["discovery","proposal","negotiation","won"].map(a=>{const s=t.filter(r=>r.stage===a);return e.jsxs("div",{className:"flex-1 min-w-[280px] bg-[var(--nexus-bg-secondary)] rounded-xl p-4 flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-bold text-sm text-[var(--nexus-text-primary)] uppercase tracking-wider",children:a}),e.jsx("span",{className:"text-xs font-semibold text-[var(--nexus-text-tertiary)] bg-[var(--nexus-card-bg)] px-2 py-1 rounded-full shadow-sm",children:s.length})]}),s.map(r=>e.jsxs("div",{onClick:()=>n(`/crm/deals/${r.id}`),className:"bg-[var(--nexus-card-bg)] p-4 rounded-lg shadow-sm border border-[var(--nexus-card-border)] hover:border-[var(--nexus-accent-primary)] transition-colors cursor-pointer group",children:[e.jsx("p",{className:"font-medium text-[var(--nexus-text-primary)] text-sm mb-2 group-hover:text-[var(--nexus-accent-primary)] transition-colors",children:r.title}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:o(r.value)}),e.jsxs("span",{className:"text-xs text-[var(--nexus-text-tertiary)] font-medium",children:["Prob: ",r.probability,"%"]})]})]},r.id)),s.length===0&&e.jsx("div",{className:"text-center text-xs text-[var(--nexus-text-tertiary)] py-6",children:"No deals in this stage"})]},a)})})})]})}export{R as default};
