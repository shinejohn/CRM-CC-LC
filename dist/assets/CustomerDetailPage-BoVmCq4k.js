import{j as e,d as u,e as T,a as K,r as c,L as $,b as p,f as h,g as o}from"./index-BcJ69802.js";import{P as L}from"./PageHeader-DpZdVOoR.js";import{D as d}from"./DataCard-CrT-k-jq.js";import{M as g}from"./MetricCard-CjdTriRj.js";import{S as j}from"./StatusBadge-BzDX3dmz.js";import{D as f}from"./DataTable-DwTvF0ji.js";import"./input--Twqmmfi.js";import"./dialog-C86vlKxl.js";import{A as k}from"./AvatarInitials-Jlrlvxv9.js";import{M as E}from"./mail-Bx8gY5X2.js";import{P as I}from"./phone-D6gvJqiP.js";import{G as z,M as G}from"./map-pin-B5u7-yCL.js";import"./chevron-right-B5h381UR.js";function O({tabs:r,activeTab:l,onTabChange:s}){return e.jsx("div",{className:"border-b border-[var(--nexus-divider)] overflow-x-auto no-scrollbar",children:e.jsx("nav",{className:"flex space-x-6 px-1","aria-label":"Tabs",children:r.map(t=>{const i=t.id===l;return e.jsxs("button",{onClick:()=>s(t.id),className:u("group inline-flex items-center gap-2 border-b-2 py-4 px-1 text-sm font-medium transition-colors whitespace-nowrap",i?"border-[var(--nexus-accent-primary)] text-[var(--nexus-accent-primary)]":"border-transparent text-[var(--nexus-text-secondary)] hover:border-[var(--nexus-card-border)] hover:text-[var(--nexus-text-primary)]"),children:[t.icon&&e.jsx(t.icon,{className:u("h-4 w-4",i?"text-[var(--nexus-accent-primary)]":"text-[var(--nexus-text-tertiary)] group-hover:text-[var(--nexus-text-secondary)]")}),t.label,t.count!==void 0&&e.jsx("span",{className:u("ml-2 rounded-full px-2.5 py-0.5 text-xs",i?"bg-[var(--nexus-accent-primary)] text-white":"bg-[var(--nexus-bg-secondary)] text-[var(--nexus-text-primary)] group-hover:bg-[var(--nexus-card-border)]"),children:t.count})]},t.id)})})})}function ee(){const{id:r}=T(),l=K(),[s,t]=c.useState(null),[i,b]=c.useState([]),[x,y]=c.useState([]),[m,N]=c.useState([]),[w,v]=c.useState(!0),[n,C]=c.useState("overview");if(c.useEffect(()=>{r&&(async()=>{v(!0);try{const[D,P,R,M]=await Promise.all([o.get(`/crm/customers/${r}`).catch(()=>({data:{data:null}})),o.get(`/crm/customers/${r}/contacts`).catch(()=>({data:{data:[]}})),o.get(`/crm/customers/${r}/deals`).catch(()=>({data:{data:[]}})),o.get(`/crm/customers/${r}/activities`).catch(()=>({data:{data:[]}}))]);t(D.data.data||{id:r||"1",name:"Acme Corp (Placeholder)",email:"hello@acme.example.com",status:"active",ltv:15400,last_contact:new Date().toISOString()}),b(P.data.data||[]),y(R.data.data||[]),N(M.data.data||[])}finally{v(!1)}})()},[r]),w)return e.jsx($,{variant:"detail"});if(!s)return e.jsx("div",{children:"Customer not found"});const S=[{header:"Name",accessorKey:"name"},{header:"Role",accessorKey:"role"},{header:"Email",accessorKey:"email"}],A=[{header:"Title",accessorKey:"title"},{header:"Stage",accessorKey:"stage",cell:a=>e.jsx(j,{status:a.stage})},{header:"Value",accessorKey:"value",cell:a=>h(a.value)}];return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx(L,{title:s.name,breadcrumbs:[{label:"CRM",href:"/crm/customers"},{label:s.name}],actions:e.jsx(j,{status:s.status,size:"md"})}),e.jsx(O,{tabs:[{id:"overview",label:"Overview"},{id:"contacts",label:"Contacts",count:i.length},{id:"deals",label:"Deals",count:x.length},{id:"activities",label:"Activities",count:m.length}],activeTab:n,onTabChange:C}),n==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2 space-y-6",children:e.jsxs(d,{title:"Customer Profile",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(k,{name:s.name,size:"lg"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-[var(--nexus-text-primary)]",children:s.name}),e.jsxs("p",{className:"text-[var(--nexus-text-secondary)]",children:["Client since ",p(s.last_contact)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-[var(--nexus-text-secondary)]",children:[e.jsx(E,{className:"w-4 h-4"})," ",e.jsx("span",{children:s.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[var(--nexus-text-secondary)]",children:[e.jsx(I,{className:"w-4 h-4"})," ",e.jsx("span",{children:"(555) 123-4567"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[var(--nexus-text-secondary)]",children:[e.jsx(z,{className:"w-4 h-4"})," ",e.jsx("span",{children:"www.example.com"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[var(--nexus-text-secondary)]",children:[e.jsx(G,{className:"w-4 h-4"})," ",e.jsx("span",{children:"New York, NY"})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{label:"Lifetime Value",value:h(s.ltv),color:"emerald"}),e.jsx(g,{label:"Active Deals",value:x.length,color:"blue"})]})]}),n==="contacts"&&e.jsx(d,{children:e.jsx(f,{columns:S,data:i,searchable:!0,onRowClick:a=>l(`/crm/contacts/${a.id}`)})}),n==="deals"&&e.jsx(d,{children:e.jsx(f,{columns:A,data:x,searchable:!0,onRowClick:a=>l(`/crm/deals/${a.id}`)})}),n==="activities"&&e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:m.length===0?e.jsx("div",{className:"text-center py-8 text-[var(--nexus-text-secondary)]",children:"No activities found."}):m.map(a=>e.jsxs("div",{className:"flex gap-4 p-4 rounded-lg bg-[var(--nexus-bg-secondary)]",children:[e.jsx("div",{className:"w-2 bg-[var(--nexus-accent-primary)] rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-[var(--nexus-text-primary)]",children:a.description}),e.jsx("p",{className:"text-sm text-[var(--nexus-text-tertiary)]",children:p(a.date,"long")})]})]},a.id))})})]})}export{ee as default};
