import{e as u,a as f,r as i,j as e,L as b,f as v,i as h,b as j,C as y,g as N}from"./index-BcJ69802.js";import{P as D}from"./PageHeader-DpZdVOoR.js";import{D as d}from"./DataCard-CrT-k-jq.js";import{M as l}from"./MetricCard-CjdTriRj.js";import{S as w}from"./StatusBadge-BzDX3dmz.js";import"./dialog-C86vlKxl.js";import{B as C}from"./input--Twqmmfi.js";import{A as P}from"./arrow-left-B-DxceX4.js";import{T as S}from"./target-CWgt0fq7.js";import{T as k}from"./trending-up-DHCZe2ia.js";import{C as A}from"./calendar-9vo-D3Vn.js";function z(){const{id:s}=u(),m=f(),[a,x]=i.useState(null),[p,o]=i.useState(!0);return i.useEffect(()=>{s&&(async()=>{o(!0);try{const r=await N.get(`/crm/deals/${s}`).catch(()=>({data:{data:null}}));x(r.data.data||{id:s||"1",title:"Enterprise Software License (Placeholder)",value:125e3,stage:"proposal",probability:60,expected_close:new Date(Date.now()+2592e6).toISOString()})}finally{o(!1)}})()},[s]),p?e.jsx(b,{variant:"detail"}):a?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs(C,{variant:"ghost",onClick:()=>m(-1),className:"mb-4 text-[var(--nexus-text-secondary)] hover:bg-[var(--nexus-bg-secondary)] hover:text-[var(--nexus-text-primary)]",children:[e.jsx(P,{className:"w-4 h-4 mr-2"})," Back"]}),e.jsx(D,{title:a.title,breadcrumbs:[{label:"CRM",href:"/crm/dashboard"},{label:"Deals",href:"/crm/deals"},{label:a.title}],actions:e.jsx(w,{status:a.stage,size:"md"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(l,{label:"Deal Value",value:v(a.value),icon:S,color:"emerald"}),e.jsx(l,{label:"Probability",value:h(a.probability),icon:k,color:"blue"}),e.jsx(l,{label:"Expected Close",value:j(a.expected_close),icon:A,color:"purple"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(d,{title:"Deal Details",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-[var(--nexus-text-secondary)] mb-4",children:"Stage Progression"}),e.jsx("div",{className:"flex items-center w-full gap-2",children:["discovery","proposal","negotiation","won"].map((t,r)=>{const n=["discovery","proposal","negotiation","won"],g=n.indexOf(a.stage)===-1&&a.stage==="lost"?-1:n.indexOf(a.stage),c=r<=g;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:`w-full h-2 rounded-full transition-colors ${c?"bg-[var(--nexus-accent-primary)]":"bg-[var(--nexus-bg-secondary)]"}`}),e.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wider ${c?"text-[var(--nexus-text-primary)]":"text-[var(--nexus-text-tertiary)]"}`,children:t})]},t)})})]}),e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 text-amber-800 dark:text-amber-400 rounded-xl flex items-start gap-3 border border-amber-200 dark:border-amber-900/50",children:[e.jsx(y,{className:"w-5 h-5 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-sm",children:"Action Required"}),e.jsx("p",{className:"text-sm mt-1",children:"Pending signed NDA from legal compliance team before moving to Negotiation stage."})]})]})]})})}),e.jsx("div",{children:e.jsx(d,{title:"Key Associated Contacts",children:e.jsx("div",{className:"text-sm text-[var(--nexus-text-secondary)] py-4 text-center",children:"Contacts linked to this deal will appear here."})})})]})]}):e.jsx("div",{children:"Deal not found"})}export{z as default};
