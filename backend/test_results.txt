
   WARN  Metadata found in doc-comment for method Tests\Unit\Services\CampaignOrchestratorServiceTest::it_starts_timeline_for_customer(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\CampaignOrchestratorServiceTest::it_does_not_create_duplicate_active_timelines(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\CampaignOrchestratorServiceTest::it_assigns_timeline_for_stage(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\CampaignOrchestratorServiceTest::it_returns_null_when_no_timeline_found(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\CampaignOrchestratorServiceTest::it_executes_actions_for_customer(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\EmailFollowupServiceTest::it_determines_sms_strategy_for_high_engagement_customers(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\EmailFollowupServiceTest::it_determines_resend_email_strategy_for_medium_engagement_customers(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\EmailFollowupServiceTest::it_determines_schedule_call_strategy_for_low_engagement_second_followup(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\EmailFollowupServiceTest::it_escalates_after_two_failed_followups(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\EmailFollowupServiceTest::it_skips_already_escalated_emails(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\EmailFollowupServiceTest::it_creates_interaction_for_resend_email(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\InboundEmailServiceTest::it_processes_inbound_email(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\InboundEmailServiceTest::it_logs_conversation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_transitions_customer_to_next_stage(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_blocks_invalid_transitions(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_allows_churn_from_any_stage(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_advances_stage_on_engagement_threshold(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_does_not_advance_below_threshold(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_handles_trial_acceptance(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_handles_conversion_to_retention(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\PipelineTransitionServiceTest::it_records_stage_history(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\SMSIntentClassifierTest::it_classifies_yes_intent(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\SMSIntentClassifierTest::it_classifies_no_intent(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\SMSIntentClassifierTest::it_classifies_question_intent(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\SMSIntentClassifierTest::it_classifies_call_request_intent(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\SMSIntentClassifierTest::it_uses_ai_fallback_for_ambiguous_messages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\SMSIntentClassifierTest::it_normalizes_messages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\SMSIntentClassifierTest::it_handles_empty_messages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\VoicemailTranscriptionServiceTest::it_downloads_recording_from_twilio_url(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\VoicemailTranscriptionServiceTest::it_handles_download_failure(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\VoicemailTranscriptionServiceTest::it_transcribes_audio_file(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\VoicemailTranscriptionServiceTest::it_handles_missing_api_key(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\VoicemailTranscriptionServiceTest::it_handles_missing_audio_file(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Unit\Services\VoicemailTranscriptionServiceTest::it_analyzes_transcription_for_urgency(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CampaignTimelineExecutionTest::it_starts_customer_on_timeline(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CampaignTimelineExecutionTest::it_executes_actions_for_day(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CampaignTimelineExecutionTest::it_skips_actions_when_conditions_not_met(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_can_create_a_conversation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_can_list_conversations(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_can_show_a_conversation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_can_update_a_conversation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_can_end_a_conversation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_can_add_message_to_conversation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_can_list_conversation_messages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\ConversationApiTest::it_enforces_tenant_isolation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_list_customers(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_create_a_customer(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_validates_required_fields_when_creating_customer(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_show_a_customer(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_show_customer_by_slug(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_update_a_customer(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_update_business_context(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_get_ai_context(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_can_delete_a_customer(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\CustomerApiTest::it_enforces_tenant_isolation(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\EmailFollowupTest::it_finds_unopened_emails_after_threshold(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\EmailFollowupTest::it_skips_emails_already_opened(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\EmailFollowupTest::it_executes_followup_strategy(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\EmailFollowupTest::it_escalates_after_multiple_followups(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\PipelineStageTransitionTest::it_transitions_customer_through_pipeline_stages(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\PipelineStageTransitionTest::it_blocks_invalid_stage_transitions(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\PipelineStageTransitionTest::it_automatically_advances_on_engagement_threshold(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\PipelineStageTransitionTest::it_handles_trial_acceptance_workflow(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\PipelineStageTransitionTest::it_records_complete_stage_history(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\SMSWebhookTest::it_processes_sms_webhook(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\SMSWebhookTest::it_classifies_sms_intent(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.

   WARN  Metadata found in doc-comment for method Tests\Feature\SMSWebhookTest::it_handles_unknown_phone_number(). Metadata in doc-comments is deprecated and will no longer be supported in PHPUnit 12. Update your test code to use attributes instead.
FOREIGN KEY ERROR: SQLSTATE[HY000]: General error: 1 near "CONSTRAINT": syntax error (Connection: sqlite, SQL: ALTER TABLE smbs ADD CONSTRAINT smbs_community_id_foreign FOREIGN KEY (community_id) REFERENCES communities(id) ON DELETE CASCADE)

   PASS  Tests\Unit\ApprovalTokenServiceTest
  ✓ generate and validate token                                          0.41s  

   PASS  Tests\Unit\ExampleTest
  ✓ that true is true

   PASS  Tests\Unit\Services\CampaignOrchestratorServiceTest
  ✓ it starts timeline for customer                                      0.01s  
  ✓ it does not create duplicate active timelines                        0.01s  
  ✓ it assigns timeline for stage                                        0.01s  
  ✓ it returns null when no timeline found                               0.01s  
  ✓ it executes actions for customer                                     0.01s  

   PASS  Tests\Unit\Services\EmailFollowupServiceTest
  ✓ it determines sms strategy for high engagement customers             0.01s  
  ✓ it determines resend email strategy for medium engagement customers  0.01s  
  ✓ it determines schedule call strategy for low engagement second foll… 0.01s  
  ✓ it escalates after two failed followups                              0.01s  
  ✓ it skips already escalated emails                                    0.01s  
  ✓ it creates interaction for resend email                              0.01s  

   PASS  Tests\Unit\Services\InboundEmailServiceTest
  ✓ it processes inbound email                                           0.01s  
  ✓ it logs conversation                                                 0.01s  

   PASS  Tests\Unit\Services\OpenAIServiceTest
  ✓ can generate embedding                                               0.02s  
  ✓ handles api error                                                    0.01s  

   FAIL  Tests\Unit\Services\PipelineTransitionServiceTest
  ✓ it transitions customer to next stage                                0.01s  
  ✓ it blocks invalid transitions                                        0.01s  
  ✓ it allows churn from any stage                                       0.01s  
  ✓ it advances stage on engagement threshold                            0.01s  
  ✓ it does not advance below threshold                                  0.01s  
  ⨯ it handles trial acceptance                                          0.02s  
  ✓ it handles conversion to retention                                   0.01s  
  ✓ it records stage history                                             0.01s  

   FAIL  Tests\Unit\Services\SMSIntentClassifierTest
  ⨯ it classifies yes intent                                             0.18s  
  ✓ it classifies no intent                                              0.01s  
  ⨯ it classifies question intent                                        0.12s  
  ⨯ it classifies call request intent                                    0.14s  
  ✓ it uses ai fallback for ambiguous messages                           0.01s  
  ✓ it normalizes messages                                               0.35s  
  ✓ it handles empty messages                                            0.13s  

   PASS  Tests\Unit\Services\VoicemailTranscriptionServiceTest
  ✓ it downloads recording from twilio url                               0.02s  
  ✓ it handles download failure                                          0.01s  
  ✓ it transcribes audio file                                            0.01s  
  ✓ it handles missing api key                                           0.01s  
  ✓ it handles missing audio file                                        0.01s  
  ✓ it analyzes transcription for urgency                                0.01s  

   PASS  Tests\Feature\AIControllerTest
  ✓ can get ai chat response                                             0.05s  
  ✓ can get ai context                                                   0.01s  
  ✓ can list ai models                                                   0.01s  
  ✓ chat requires message                                                0.01s  

   FAIL  Tests\Feature\AdApiTest
  ⨯ can list ads                                                         0.01s  
  ⨯ can generate ad from campaign                                        0.01s  
  ⨯ can generate ad from content                                         0.01s  
  ⨯ can list ad templates                                                0.01s  
  ⨯ can create ad template                                               0.01s  
  ⨯ can show ad                                                          0.01s  
  ⨯ can update ad                                                        0.01s  

   PASS  Tests\Feature\AiIntegrationTest
  ✓ v1 service uses v2 gateway                                           0.01s  
  ✓ workflow orchestrator execution                                      0.01s  

   PASS  Tests\Feature\ApprovalFlowTest
  ✓ can submit approval                                                  0.02s  
  ✓ full approval flow renders success                                   0.02s  
  ✓ approvals api index                                                  0.02s  

   FAIL  Tests\Feature\ArticleApiTest
  ✓ can list articles                                                    0.01s  
  ✓ can create article                                                   0.01s  
  ✓ can show article                                                     0.01s  
  ✓ can update article                                                   0.01s  
  ⨯ can delete article                                                   0.01s  
  ✓ can update article status to published                               0.01s  

   FAIL  Tests\Feature\CampaignApiTest
  ⨯ can list campaigns                                                   0.01s  
  ⨯ can show campaign by slug                                            0.01s  
  ✓ returns 404 for nonexistent campaign                                 0.01s  

   FAIL  Tests\Feature\CampaignGenerationApiTest
  ⨯ can generate campaign                                                0.01s  
  ⨯ can list campaign templates                                          0.01s  
  ⨯ can get campaign suggestions                                         0.01s  

   FAIL  Tests\Feature\CampaignTimelineExecutionTest
  ✓ it starts customer on timeline                                       0.01s  
  ⨯ it executes actions for day                                          0.01s  
  ⨯ it skips actions when conditions not met                             0.01s  

   FAIL  Tests\Feature\ContactApiTest
  ⨯ can contact customer                                                 0.01s  
  ⨯ can schedule contact                                                 0.01s  
  ⨯ can get customer contact preferences                                 0.01s  
  ⨯ can update customer contact preferences                              0.01s  

   PASS  Tests\Feature\ContactSalesTest
  ✓ contact sales submission success                                     0.01s  
  ✓ contact sales validation required fields                             0.01s  
  ✓ contact sales validation invalid email                               0.01s  
  ✓ contact sales validation message too long                            0.01s  
  ✓ contact sales with optional fields                                   0.01s  
  ✓ contact sales with campaign context                                  0.01s  
  ✓ contact sales with tenant id                                         0.01s  

   PASS  Tests\Feature\ContentGenerationApiTest
  ✓ can list generated content                                           0.01s  
  ✓ can generate content                                                 0.01s  
  ✓ can generate content from campaign                                   0.01s  
  ✓ can list content templates                                           0.01s  
  ✓ can create content template                                          0.01s  
  ✓ can show generated content                                           0.01s  
  ✓ can update content status                                            0.01s  

   FAIL  Tests\Feature\ConversationApiTest
  ✓ it can create a conversation                                         0.01s  
  ✓ it can list conversations                                            0.01s  
  ✓ it can show a conversation                                           0.01s  
  ✓ it can update a conversation                                         0.01s  
  ✓ it can end a conversation                                            0.01s  
  ⨯ it can add message to conversation                                   0.01s  
  ⨯ it can list conversation messages                                    0.01s  
  ✓ it enforces tenant isolation                                         0.01s  

   FAIL  Tests\Feature\CrmAdvancedAnalyticsApiTest
  ⨯ can get customer engagement score                                    0.01s  
  ⨯ can get campaign roi                                                 0.01s  
  ⨯ can get predictive score                                             0.01s  

   FAIL  Tests\Feature\CrmAnalyticsApiTest
  ⨯ can get interest analytics                                           0.01s  
  ⨯ can get purchase analytics                                           0.01s  
  ⨯ can get learning analytics                                           0.01s  
  ⨯ can get campaign performance                                         0.01s  

   FAIL  Tests\Feature\CrmDashboardApiTest
  ⨯ can get dashboard analytics                                          0.01s  

   PASS  Tests\Feature\CssnSubscriptionControllerTest
  ✓ can subscribe to cssn                                                0.04s  
  ✓ can fetch subscription                                               0.01s  
  ✓ can update preferences                                               0.01s  

   FAIL  Tests\Feature\CustomerApiTest
  ✓ it can list customers                                                0.01s  
  ✓ it can create a customer                                             0.01s  
  ✓ it validates required fields when creating customer                  0.01s  
  ✓ it can show a customer                                               0.01s  
  ✓ it can show customer by slug                                         0.01s  
  ✓ it can update a customer                                             0.01s  
  ✓ it can update business context                                       0.01s  
  ✓ it can get ai context                                                0.01s  
  ⨯ it can delete a customer                                             0.01s  
  ✓ it enforces tenant isolation                                         0.01s  

   PASS  Tests\Feature\DealPipelineApiTest
  ✓ deals full crud                                                      0.02s  
  ✓ deal requires loss reason when marked lost                           0.01s  
  ✓ quotes full crud and convert to invoice                              0.02s  
  ✓ invoices full crud and record payment                                0.01s  
  ✓ crm contacts full crud                                               0.01s  
  ✓ crm activities full crud and complete                                0.01s  
  ✓ deals enforce tenant isolation                                       0.01s  
  ✓ deals pipeline kanban view                                           0.01s  

   FAIL  Tests\Feature\EmailCampaignApiTest
  ⨯ can list email campaigns                                             0.01s  
  ⨯ can create email campaign                                            0.01s  
  ⨯ can list email templates                                             0.01s  
  ⨯ can create email template                                            0.01s  

   FAIL  Tests\Feature\EmailFollowupTest
  ⨯ it finds unopened emails after threshold                             0.01s  
  ⨯ it skips emails already opened                                       0.01s  
  ⨯ it executes followup strategy                                        0.01s  
  ⨯ it escalates after multiple followups                                0.01s  

   PASS  Tests\Feature\ExampleTest
  ✓ the application returns a successful response                        0.01s  

   FAIL  Tests\Feature\KnowledgeApiTest
  ⨯ can list knowledge items                                             0.01s  
  ⨯ can create knowledge item                                            0.21s  
  ✓ can show knowledge item                                              0.02s  
  ⨯ can update knowledge item                                            0.20s  
  ⨯ can delete knowledge item                                            0.01s  
  ⨯ can vote on knowledge item                                           0.01s  
  ✓ can list faq categories                                              0.01s  
  ⨯ can create faq category                                              0.01s  

   FAIL  Tests\Feature\OrderApiTest
  ⨯ can list orders                                                      0.02s  
  ⨯ can show order                                                       0.01s  
  ⨯ can create checkout session                                          0.01s  
  ⨯ checkout requires valid customer                                     0.01s  
  ⨯ checkout requires items                                              0.01s  

   FAIL  Tests\Feature\OutboundCampaignApiTest
  ⨯ can list outbound campaigns                                          0.01s  
  ⨯ can create outbound campaign                                         0.01s  
  ⨯ can show outbound campaign                                           0.01s  
  ⨯ can update outbound campaign                                         0.01s  
  ⨯ can get campaign recipients                                          0.01s  
  ⨯ can start campaign                                                   0.01s  
  ⨯ can get campaign analytics                                           0.01s  

   FAIL  Tests\Feature\PersonalityApiTest
  ⨯ can list personalities                                               0.01s  
  ⨯ can create personality                                               0.01s  
  ⨯ can show personality                                                 0.01s  
  ⨯ can assign personality to customer                                   0.01s  
  ✓ can get customer personality                                         0.01s  
  ⨯ can generate personality response                                    0.01s  

   FAIL  Tests\Feature\PhoneCampaignApiTest
  ⨯ can list phone campaigns                                             0.01s  
  ⨯ can create phone campaign                                            0.01s  
  ⨯ can list phone scripts                                               0.01s  
  ⨯ can create phone script                                              0.01s  
  ⨯ can update call status                                               0.01s  

   FAIL  Tests\Feature\PipelineStageTransitionTest
  ✓ it transitions customer through pipeline stages                      0.01s  
  ✓ it blocks invalid stage transitions                                  0.01s  
  ✓ it automatically advances on engagement threshold                    0.01s  
  ⨯ it handles trial acceptance workflow                                 0.01s  
  ✓ it records complete stage history                                    0.01s  

   PASS  Tests\Feature\PostalWebhookTest
  ✓ delivered event updates recipient and campaign                       0.01s  
  ✓ hard bounce creates suppression                                      0.01s  

   FAIL  Tests\Feature\PresentationApiTest
  ⨯ can list presentation templates                                      0.01s  
  ⨯ can show presentation template                                       0.01s  
  ⨯ can create presentation from template                                0.01s  
  ⨯ can show generated presentation                                      0.01s  
  ⨯ can generate audio for presentation                                  0.01s  

   FAIL  Tests\Feature\ProvisioningTaskApiTest
  ⨯ can retry failed task                                                0.02s  
  ✓ can show task                                                        0.02s  

   FAIL  Tests\Feature\PublishingApiTest
  ⨯ can get publishing dashboard                                         0.02s  
  ⨯ can get publishing calendar                                          0.01s  
  ⨯ can get publishing analytics                                         0.01s  
  ⨯ can publish content                                                  0.01s  

   FAIL  Tests\Feature\SMSCampaignApiTest
  ⨯ can list sms campaigns                                               0.01s  
  ⨯ can create sms campaign                                              0.01s  
  ⨯ can list sms templates                                               0.01s  
  ✓ can create sms template                                              0.01s  
  ⨯ can update sms status                                                0.01s  

   FAIL  Tests\Feature\SMSWebhookTest
  ⨯ it processes sms webhook                                             0.01s  
  ✓ it classifies sms intent                                             0.33s  
  ⨯ it handles unknown phone number                                      0.02s  

   FAIL  Tests\Feature\SearchApiTest
  ✓ can search knowledge base                                            0.19s  
  ✓ can perform hybrid search                                            0.26s  
  ✓ search requires query                                                0.02s  
  ✓ can perform fulltext search                                          0.02s  
  ⨯ can get embedding status                                             0.02s  

   FAIL  Tests\Feature\ServiceApiTest
  ⨯ can list services                                                    0.01s  
  ⨯ can show service                                                     0.01s  
  ⨯ can filter services by category                                      0.01s  
  ⨯ can filter services by type                                          0.01s  
  ⨯ can filter active services                                           0.01s  

   FAIL  Tests\Feature\ServiceCategoryApiTest
  ⨯ can list service categories                                          0.01s  
  ⨯ can show service category                                            0.01s  
  ⨯ can list services in category                                        0.01s  
  ⨯ can create service category                                          0.01s  
  ⨯ can update service category                                          0.01s  
  ⨯ can delete service category                                          0.01s  

   PASS  Tests\Feature\SocialStudioControllerTest
  ✓ can fetch credits                                                    0.01s  
  ✓ can purchase credits                                                 0.01s  
  ✓ can subscribe to studio                                              0.01s  
  ✓ can generate post copy                                               0.01s  
  ✓ fails generation if insufficient credits                             0.01s  
  ✓ can mock oauth connect                                               0.01s  

   FAIL  Tests\Feature\StripeWebhookTest
  ⨯ can handle payment intent succeeded webhook                          0.01s  
  ⨯ can handle invoice payment succeeded webhook                         0.01s  
  ⨯ can handle customer subscription created webhook                     0.01s  
  ⨯ can handle customer subscription deleted webhook                     0.01s  
  ⨯ ignores unknown webhook types                                        0.01s  

   FAIL  Tests\Feature\SurveyApiTest
  ⨯ can list survey sections                                             0.01s  
  ⨯ can create survey section                                            0.01s  
  ⨯ can update survey section                                            0.01s  
  ⨯ can delete survey section                                            0.01s  
  ✓ can list questions for section                                       0.01s  
  ✓ can create survey question                                           0.01s  
  ✓ can update survey question                                           0.01s  
  ⨯ can delete survey question                                           0.01s  

   FAIL  Tests\Feature\TTSApiTest
  ⨯ can generate audio from text                                         0.01s  
  ⨯ can get generation status                                            0.01s  
  ⨯ requires text for generation                                         0.01s  
  ⨯ can list available voices                                            0.01s  

   FAIL  Tests\Feature\TrainingApiTest
  ⨯ can list training courses                                            0.01s  
  ⨯ can show training course                                             0.01s  
  ⨯ can enroll in training course                                        0.01s  
  ⨯ can get user enrollments                                             0.01s  
  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Services\PipelineTransitionServiceTest > it handles tr…   
  Failed asserting that 1 is true.

  at tests/Unit/Services/PipelineTransitionServiceTest.php:159
    155▕ 
    156▕         $this->service->handleTrialAcceptance($customer);
    157▕ 
    158▕         $customer->refresh();
  ➜ 159▕         $this->assertTrue($customer->trial_active);
    160▕         $this->assertNotNull($customer->trial_started_at);
    161▕         $this->assertNotNull($customer->trial_ends_at);
    162▕         $this->assertEquals(90, $customer->trial_started_at->diffInDays($customer->trial_ends_at));
    163▕     }

  1   tests/Unit/Services/PipelineTransitionServiceTest.php:159

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Services\SMSIntentClassifierTest > it classifies yes i…   
  Failed asserting that 0.36000000000000004 is equal to 0.7 or is greater than 0.7.

  at tests/Unit/Services/SMSIntentClassifierTest.php:26
     22▕     {
     23▕         $result = $this->classifier->classify('Yes, I am interested');
     24▕ 
     25▕         $this->assertEquals('yes', $result['intent']);
  ➜  26▕         $this->assertGreaterThanOrEqual(0.7, $result['confidence']);
     27▕         $this->assertEquals('pattern', $result['method']);
     28▕     }
     29▕ 
     30▕     /** @test */

  1   tests/Unit/Services/SMSIntentClassifierTest.php:26

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Services\SMSIntentClassifierTest > it classifies quest…   
  Failed asserting that 0.24000000000000005 is equal to 0.7 or is greater than 0.7.

  at tests/Unit/Services/SMSIntentClassifierTest.php:46
     42▕     {
     43▕         $result = $this->classifier->classify('How does this work?');
     44▕ 
     45▕         $this->assertEquals('question', $result['intent']);
  ➜  46▕         $this->assertGreaterThanOrEqual(0.7, $result['confidence']);
     47▕     }
     48▕ 
     49▕     /** @test */
     50▕     public function it_classifies_call_request_intent(): void

  1   tests/Unit/Services/SMSIntentClassifierTest.php:46

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Unit\Services\SMSIntentClassifierTest > it classifies call…    
  Failed asserting that 0.5524999999999999 is equal to 0.7 or is greater than 0.7.

  at tests/Unit/Services/SMSIntentClassifierTest.php:55
     51▕     {
     52▕         $result = $this->classifier->classify('Can you call me?');
     53▕ 
     54▕         $this->assertEquals('call_request', $result['intent']);
  ➜  55▕         $this->assertGreaterThanOrEqual(0.7, $result['confidence']);
     56▕     }
     57▕ 
     58▕     /** @test */
     59▕     public function it_uses_ai_fallback_for_ambiguous_messages(): void

  1   tests/Unit/Services/SMSIntentClassifierTest.php:55

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\AdApiTest > can list ads                               
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/AdApiTest.php:21
     17▕     public function test_can_list_ads(): void
     18▕     {
     19▕         $response = $this->getJson('/api/v1/ads');
     20▕ 
  ➜  21▕         $response->assertStatus(200)
     22▕             ->assertJsonStructure([
     23▕                 'data' => [
     24▕                     '*' => ['id', 'title', 'type', 'status']
     25▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\AdApiTest > can generate ad from campaign              
  Failed asserting that an array contains 422.

  at tests/Feature/AdApiTest.php:40
     36▕         ];
     37▕ 
     38▕         $response = $this->postJson('/api/v1/ads/generate-from-campaign', $data);
     39▕ 
  ➜  40▕         $this->assertContains($response->status(), [201, 202, 200]);
     41▕     }
     42▕ 
     43▕     public function test_can_generate_ad_from_content(): void
     44▕     {

  1   tests/Feature/AdApiTest.php:40

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\AdApiTest > can generate ad from content               
  Failed asserting that an array contains 422.

  at tests/Feature/AdApiTest.php:53
     49▕         ];
     50▕ 
     51▕         $response = $this->postJson('/api/v1/ads/generate-from-content', $data);
     52▕ 
  ➜  53▕         $this->assertContains($response->status(), [201, 202, 200]);
     54▕     }
     55▕ 
     56▕     public function test_can_list_ad_templates(): void
     57▕     {

  1   tests/Feature/AdApiTest.php:53

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\AdApiTest > can list ad templates                      
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/AdApiTest.php:60
     56▕     public function test_can_list_ad_templates(): void
     57▕     {
     58▕         $response = $this->getJson('/api/v1/ads/templates');
     59▕ 
  ➜  60▕         $response->assertStatus(200)
     61▕             ->assertJsonStructure([
     62▕                 'data' => [
     63▕                     '*' => ['id', 'name', 'type', 'platform']
     64▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\AdApiTest > can create ad template                     
  Expected response status code [201] but received 422.
Failed asserting that 422 is identical to 201.

The following errors occurred during the last request:

{
    "error": "Validation failed",
    "errors": {
        "ad_type": [
            "The ad type field is required."
        ]
    }
}

  at tests/Feature/AdApiTest.php:80
     76▕         ];
     77▕ 
     78▕         $response = $this->postJson('/api/v1/ads/templates', $data);
     79▕ 
  ➜  80▕         $response->assertStatus(201)
     81▕             ->assertJsonStructure(['data' => ['id', 'name']]);
     82▕     }
     83▕ 
     84▕     public function test_can_show_ad(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\AdApiTest > can show ad                                
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/AdApiTest.php:90
     86▕         $adId = 'test-ad-id';
     87▕ 
     88▕         $response = $this->getJson("/api/v1/ads/{$adId}");
     89▕ 
  ➜  90▕         $response->assertStatus(200)
     91▕             ->assertJsonStructure(['data']);
     92▕     }
     93▕ 
     94▕     public function test_can_update_ad(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\AdApiTest > can update ad                              
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/AdApiTest.php:105
    101▕         ];
    102▕ 
    103▕         $response = $this->putJson("/api/v1/ads/{$adId}", $data);
    104▕ 
  ➜ 105▕         $response->assertStatus(200)
    106▕             ->assertJsonStructure(['data', 'message']);
    107▕     }
    108▕ }
    109▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ArticleApiTest > can delete article                    
  Expected response status code [204] but received 200.
Failed asserting that 200 is identical to 204.

  at tests/Feature/ArticleApiTest.php:95
     91▕         $article = Article::factory()->create();
     92▕ 
     93▕         $response = $this->deleteJson("/api/v1/articles/{$article->id}");
     94▕ 
  ➜  95▕         $response->assertStatus(204);
     96▕ 
     97▕         $this->assertDatabaseMissing('articles', [
     98▕             'id' => $article->id,
     99▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CampaignApiTest > can list campaigns                   
  Failed asserting that an array has the key 'id'.

  at tests/Feature/CampaignApiTest.php:33
     29▕ 
     30▕         $response = $this->getJson('/api/v1/campaigns');
     31▕ 
     32▕         $response->assertStatus(200)
  ➜  33▕             ->assertJsonStructure([
     34▕                 'data' => [
     35▕                     '*' => ['id', 'title', 'landing_page_slug']
     36▕                 ]
     37▕             ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CampaignApiTest > can show campaign by slug            
  Unable to find JSON: 

[{
    "data": {
        "landing_page_slug": "test-campaign-2"
    }
}]

within response JSON:

[{
    "data": {
        "campaign": {
            "id": "TEST-002",
            "week": 1,
            "day": 2,
            "type": "email",
            "title": "Test Campaign 2",
            "subject": "Test Subject 2",
            "landing_page": "test-campaign-2",
            "template": null,
            "description": null
        },
        "landing_page": {
            "campaign_id": "TEST-002",
            "landing_page_slug": "test-campaign-2",
            "url": null,
            "template_id": null,
            "template_name": null,
            "slide_count": 0,
            "duration_seconds": null,
            "primary_cta": null,
            "secondary_cta": null,
            "ai_persona": null,
            "ai_tone": null,
            "ai_goal": null,
            "data_capture_fields": "",
            "audio_base_url": null,
            "crm_tracking": false,
            "conversion_goal": null,
            "utm_source": null,
            "utm_medium": null,
            "utm_campaign": null,
            "utm_content": null
        },
        "template": null,
        "slides": [],
        "article": null,
        "emails": [],
        "personalization": null,
        "presentation": null
    }
}].


Failed asserting that an array has the subset Array &0 [
    'data' => Array &1 [
        'landing_page_slug' => 'test-campaign-2',
    ],
].
       ),
       'personalization' => NULL,
       'presentation' => NULL,
  -    'landing_page_slug' => 'test-campaign-2',
     ),
   )
  

  at tests/Feature/CampaignApiTest.php:58
     54▕ 
     55▕         $response = $this->getJson('/api/v1/campaigns/test-campaign-2');
     56▕ 
     57▕         $response->assertStatus(200)
  ➜  58▕             ->assertJson([
     59▕                 'data' => [
     60▕                     'landing_page_slug' => 'test-campaign-2',
     61▕                 ]
     62▕             ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CampaignGenerationApiTest > can generate campaign      
  Failed asserting that an array contains 422.

  at tests/Feature/CampaignGenerationApiTest.php:24
     20▕ 
     21▕         $response = $this->postJson('/api/v1/campaigns/generate', $data);
     22▕ 
     23▕         // May return 201 or 202 (accepted) depending on implementation
  ➜  24▕         $this->assertContains($response->status(), [201, 202, 200]);
     25▕     }
     26▕ 
     27▕     public function test_can_list_campaign_templates(): void
     28▕     {

  1   tests/Feature/CampaignGenerationApiTest.php:24

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CampaignGenerationApiTest > can list campaign templ…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/CampaignGenerationApiTest.php:31
     27▕     public function test_can_list_campaign_templates(): void
     28▕     {
     29▕         $response = $this->getJson('/api/v1/campaigns/templates');
     30▕ 
  ➜  31▕         $response->assertStatus(200)
     32▕             ->assertJsonStructure([
     33▕                 'data' => [
     34▕                     '*' => ['id', 'name', 'type', 'objectives']
     35▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CampaignGenerationApiTest > can get campaign sugges…   
  Expected response status code [200] but received 422.
Failed asserting that 422 is identical to 200.

The following errors occurred during the last request:

{
    "error": "Validation failed",
    "errors": {
        "customer_id": [
            "The selected customer id is invalid."
        ]
    }
}

  at tests/Feature/CampaignGenerationApiTest.php:48
     44▕         ];
     45▕ 
     46▕         $response = $this->postJson('/api/v1/campaigns/suggestions', $data);
     47▕ 
  ➜  48▕         $response->assertStatus(200)
     49▕             ->assertJsonStructure([
     50▕                 'data' => [
     51▕                     '*' => ['type', 'recommendation', 'rationale']
     52▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CampaignTimelineExecutionTest > it…   QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 FOREIGN KEY constraint failed (Connection: sqlite, SQL: insert into "campaign_timeline_actions" ("campaign_timeline_id", "day_number", "channel", "action_type", "campaign_id", "priority", "delay_hours", "is_active", "updated_at", "created_at") values (1, 1, email, send_email, TEST-001, 0, 0, 1, 2026-02-24 19:58:47, 2026-02-24 19:58:47))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+19 vendor frames [22m
  20  tests/Feature/CampaignTimelineExecutionTest.php:91

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CampaignTimelineExecutionTest > it…   QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 FOREIGN KEY constraint failed (Connection: sqlite, SQL: insert into "campaign_timeline_actions" ("campaign_timeline_id", "day_number", "channel", "action_type", "campaign_id", "conditions", "priority", "delay_hours", "is_active", "updated_at", "created_at") values (1, 1, email, send_email, TEST-001, {"if":"email_opened","within_hours":48,"then":"skip"}, 0, 0, 1, 2026-02-24 19:58:47, 2026-02-24 19:58:47))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+19 vendor frames [22m
  20  tests/Feature/CampaignTimelineExecutionTest.php:153

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ContactApiTest > can contact customer                  
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\SMSService::$accountSid of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/SMSService.php:16
Stack trace:
#0 [internal function]: App\Services\SMSService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\SM...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\SM...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\SM...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\SM...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\SM...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\Co...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\Co...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\Co...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\Co...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\Co...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/persona...', Array, Array, Array, Array, '{"customer_id":...')
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/persona...', Array, Array, 0)
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/ContactApiTest.php(25): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/persona...', Array)
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\ContactApiTest->test_can_contact_customer()
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\ContactApiTest))
#65 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#66 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#67 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#68 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#69 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#70 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#71 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\SMSService::$accountSid of type string

  at tests/Feature/ContactApiTest.php:27
     23▕         ];
     24▕ 
     25▕         $response = $this->postJson('/api/v1/personality-contacts/contact', $data);
     26▕ 
  ➜  27▕         $response->assertStatus(200)
     28▕             ->assertJsonStructure(['data', 'message']);
     29▕     }
     30▕ 
     31▕     public function test_can_schedule_contact(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ContactApiTest > can schedule contact                  
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\SMSService::$accountSid of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/SMSService.php:16
Stack trace:
#0 [internal function]: App\Services\SMSService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\SM...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\SM...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\SM...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\SM...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\SM...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\Co...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\Co...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\Co...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\Co...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\Co...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/persona...', Array, Array, Array, Array, '{"customer_id":...')
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/persona...', Array, Array, 0)
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/ContactApiTest.php(43): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/persona...', Array)
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\ContactApiTest->test_can_schedule_contact()
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\ContactApiTest))
#65 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#66 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#67 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#68 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#69 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#70 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#71 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\SMSService::$accountSid of type string

  at tests/Feature/ContactApiTest.php:45
     41▕         ];
     42▕ 
     43▕         $response = $this->postJson('/api/v1/personality-contacts/schedule', $data);
     44▕ 
  ➜  45▕         $response->assertStatus(201)
     46▕             ->assertJsonStructure(['data', 'message']);
     47▕     }
     48▕ 
     49▕     public function test_can_get_customer_contact_preferences(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ContactApiTest > can get customer contact preferenc…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\SMSService::$accountSid of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/SMSService.php:16
Stack trace:
#0 [internal function]: App\Services\SMSService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\SM...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\SM...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\SM...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\SM...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\SM...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\Co...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\Co...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\Co...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\Co...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\Co...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/v1/persona...', Array, Array, Array, Array, '[]')
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/v1/persona...', Array, Array, 0)
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/ContactApiTest.php(53): Illuminate\Foundation\Testing\TestCase->getJson('/api/v1/persona...')
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\ContactApiTest->test_can_get_customer_contact_preferences()
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\ContactApiTest))
#65 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#66 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#67 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#68 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#69 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#70 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#71 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\SMSService::$accountSid of type string

  at tests/Feature/ContactApiTest.php:55
     51▕         $customer = Customer::factory()->create();
     52▕ 
     53▕         $response = $this->getJson("/api/v1/personality-contacts/customers/{$customer->id}/preferences");
     54▕ 
  ➜  55▕         $response->assertStatus(200)
     56▕             ->assertJsonStructure(['data']);
     57▕     }
     58▕ 
     59▕     public function test_can_update_customer_contact_preferences(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ContactApiTest > can update customer contact prefer…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\SMSService::$accountSid of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/SMSService.php:16
Stack trace:
#0 [internal function]: App\Services\SMSService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\SM...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\SM...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\SM...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\SM...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\SM...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\Co...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\Co...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\Co...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\Co...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\Co...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PUT', '/api/v1/persona...', Array, Array, Array, Array, '{"preferred_met...')
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(441): Illuminate\Foundation\Testing\TestCase->json('PUT', '/api/v1/persona...', Array, Array, 0)
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/ContactApiTest.php(69): Illuminate\Foundation\Testing\TestCase->putJson('/api/v1/persona...', Array)
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\ContactApiTest->test_can_update_customer_contact_preferences()
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\ContactApiTest))
#65 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#66 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#67 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#68 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#69 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#70 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#71 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\SMSService::$accountSid of type string

  at tests/Feature/ContactApiTest.php:71
     67▕         ];
     68▕ 
     69▕         $response = $this->putJson("/api/v1/personality-contacts/customers/{$customer->id}/preferences", $data);
     70▕ 
  ➜  71▕         $response->assertStatus(200)
     72▕             ->assertJsonStructure(['data', 'message']);
     73▕     }
     74▕ }
     75▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ConversationApiTest > it can add message to convers…   
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

PDOException: SQLSTATE[HY000]: General error: 1 table conversation_messages has no column named updated_at in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php:564
Stack trace:
#0 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(564): PDO->prepare('insert into "co...')
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(813): Illuminate\Database\Connection->{closure:Illuminate\Database\Connection::statement():559}('insert into "co...', Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(780): Illuminate\Database\Connection->runQueryCallback('insert into "co...', Array, Object(Closure))
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(559): Illuminate\Database\Connection->run('insert into "co...', Array, Object(Closure))
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(523): Illuminate\Database\Connection->statement('insert into "co...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3804): Illuminate\Database\Connection->insert('insert into "co...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(2235): Illuminate\Database\Query\Builder->insert(Array)
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(1412): Illuminate\Database\Eloquent\Builder->__call('insert', Array)
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(1240): Illuminate\Database\Eloquent\Model->performInsert(Object(Illuminate\Database\Eloquent\Builder))
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(1219): Illuminate\Database\Eloquent\Model->save()
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Support/helpers.php(485): Illuminate\Database\Eloquent\Builder->{closure:Illuminate\Database\Eloquent\Builder::create():1218}(Object(App\Models\ConversationMessage))
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(1218): tap(Object(App\Models\ConversationMessage), Object(Closure))
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php(23): Illuminate\Database\Eloquent\Builder->create(Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(2540): Illuminate\Database\Eloquent\Model->forwardCallTo(Object(Illuminate\Database\Eloquent\Builder), 'create', Array)
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(2556): Illuminate\Database\Eloquent\Model->__call('create', Array)
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/ConversationController.php(173): Illuminate\Database\Eloquent\Model::__callStatic('create', Array)
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\ConversationController->addMessage(Object(Illuminate\Http\Request), '019c913b-97bf-7...')
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\ConversationController), 'addMessage')
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/convers...', Array, Array, Array, Array, '{"role":"user",...')
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/convers...', Array, Array, 0)
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/ConversationApiTest.php(191): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/convers...', Array, Array)
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\ConversationApiTest->it_can_add_message_to_conversation()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\ConversationApiTest))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#65 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#66 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#67 {main}

Next Illuminate\Database\QueryException: SQLSTATE[HY000]: General error: 1 table conversation_messages has no column named updated_at (Connection: sqlite, SQL: insert into "conversation_messages" ("role", "content", "conversation_id", "id", "timestamp", "updated_at", "created_at") values (user, Hello, I have a question, 019c913b-97bf-7158-8ace-b4399a1e59f4, 6c5341d9-15a4-4cd1-bcd1-e405ad3c3d96, 2026-02-24 19:58:47, 2026-02-24 19:58:47, 2026-02-24 19:58:47)) in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
Stack trace:
#0 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(780): Illuminate\Database\Connection->runQueryCallback('insert into "co...', Array, Object(Closure))
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(559): Illuminate\Database\Connection->run('insert into "co...', Array, Object(Closure))
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Connection.php(523): Illuminate\Database\Connection->statement('insert into "co...', Array)
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Query/Builder.php(3804): Illuminate\Database\Connection->insert('insert into "co...', Array)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(2235): Illuminate\Database\Query\Builder->insert(Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(1412): Illuminate\Database\Eloquent\Builder->__call('insert', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(1240): Illuminate\Database\Eloquent\Model->performInsert(Object(Illuminate\Database\Eloquent\Builder))
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(1219): Illuminate\Database\Eloquent\Model->save()
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Support/helpers.php(485): Illuminate\Database\Eloquent\Builder->{closure:Illuminate\Database\Eloquent\Builder::create():1218}(Object(App\Models\ConversationMessage))
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Builder.php(1218): tap(Object(App\Models\ConversationMessage), Object(Closure))
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Support/Traits/ForwardsCalls.php(23): Illuminate\Database\Eloquent\Builder->create(Array)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(2540): Illuminate\Database\Eloquent\Model->forwardCallTo(Object(Illuminate\Database\Eloquent\Builder), 'create', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Database/Eloquent/Model.php(2556): Illuminate\Database\Eloquent\Model->__call('create', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/ConversationController.php(173): Illuminate\Database\Eloquent\Model::__callStatic('create', Array)
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\ConversationController->addMessage(Object(Illuminate\Http\Request), '019c913b-97bf-7...')
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\ConversationController), 'addMessage')
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/convers...', Array, Array, Array, Array, '{"role":"user",...')
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/convers...', Array, Array, 0)
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/ConversationApiTest.php(191): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/convers...', Array, Array)
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\ConversationApiTest->it_can_add_message_to_conversation()
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\ConversationApiTest))
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#65 {main}

----------------------------------------------------------------------------------

SQLSTATE[HY000]: General error: 1 table conversation_messages has no column named updated_at (Connection: sqlite, SQL: insert into "conversation_messages" ("role", "content", "conversation_id", "id", "timestamp", "updated_at", "created_at") values (user, Hello, I have a question, 019c913b-97bf-7158-8ace-b4399a1e59f4, 6c5341d9-15a4-4cd1-bcd1-e405ad3c3d96, 2026-02-24 19:58:47, 2026-02-24 19:58:47, 2026-02-24 19:58:47))

  at tests/Feature/ConversationApiTest.php:197
    193▕             $messageData,
    194▕             $this->getHeaders()
    195▕         );
    196▕ 
  ➜ 197▕         $response->assertStatus(201)
    198▕             ->assertJsonStructure([
    199▕                 'data' => ['id', 'role', 'content', 'timestamp'],
    200▕                 'message'
    201▕             ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ConversationApiTest > it can list c…  QueryException   
  SQLSTATE[HY000]: General error: 1 table conversation_messages has no column named updated_at (Connection: sqlite, SQL: insert into "conversation_messages" ("conversation_id", "role", "content", "id", "timestamp", "updated_at", "created_at") values (019c913b-97c8-7302-a8fa-939b70ebe0fe, user, Message 1, 2ae063ca-b545-4b8a-a685-b04312639822, 2026-02-24 19:58:47, 2026-02-24 19:58:47, 2026-02-24 19:58:47))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+17 vendor frames [22m
  18  tests/Feature/ConversationApiTest.php:224

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmAdvancedAnalyticsApiTest > can get customer enga…   
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmAdvancedAnalyticsApiTest.php:19
     15▕         $customer = Customer::factory()->create();
     16▕ 
     17▕         $response = $this->getJson("/api/v1/crm/customers/{$customer->id}/engagement-score");
     18▕ 
  ➜  19▕         $response->assertStatus(200)
     20▕             ->assertJsonStructure([
     21▕                 'data' => [
     22▕                     'customer_id',
     23▕                     'engagement_score',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmAdvancedAnalyticsApiTest > can get campaign roi     
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmAdvancedAnalyticsApiTest.php:36
     32▕         $campaignId = 'test-campaign-id';
     33▕ 
     34▕         $response = $this->getJson("/api/v1/crm/campaigns/{$campaignId}/roi");
     35▕ 
  ➜  36▕         $response->assertStatus(200)
     37▕             ->assertJsonStructure([
     38▕                 'data' => [
     39▕                     'campaign_id',
     40▕                     'roi',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmAdvancedAnalyticsApiTest > can get predictive sc…   
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmAdvancedAnalyticsApiTest.php:54
     50▕         $customer = Customer::factory()->create();
     51▕ 
     52▕         $response = $this->getJson("/api/v1/crm/customers/{$customer->id}/predictive-score");
     53▕ 
  ➜  54▕         $response->assertStatus(200)
     55▕             ->assertJsonStructure([
     56▕                 'data' => [
     57▕                     'customer_id',
     58▕                     'predictive_score',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmAnalyticsApiTest > can get interest analytics       
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmAnalyticsApiTest.php:16
     12▕     public function test_can_get_interest_analytics(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/crm/analytics/interest?start_date=2024-01-01&end_date=2024-12-31');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     'total_interests',
     20▕                     'top_interests',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmAnalyticsApiTest > can get purchase analytics       
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmAnalyticsApiTest.php:30
     26▕     public function test_can_get_purchase_analytics(): void
     27▕     {
     28▕         $response = $this->getJson('/api/v1/crm/analytics/purchases?start_date=2024-01-01&end_date=2024-12-31');
     29▕ 
  ➜  30▕         $response->assertStatus(200)
     31▕             ->assertJsonStructure([
     32▕                 'data' => [
     33▕                     'total_purchases',
     34▕                     'revenue',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmAnalyticsApiTest > can get learning analytics       
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmAnalyticsApiTest.php:45
     41▕     public function test_can_get_learning_analytics(): void
     42▕     {
     43▕         $response = $this->getJson('/api/v1/crm/analytics/learning?start_date=2024-01-01&end_date=2024-12-31');
     44▕ 
  ➜  45▕         $response->assertStatus(200)
     46▕             ->assertJsonStructure([
     47▕                 'data' => [
     48▕                     'total_learning_activities',
     49▕                     'completion_rate',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmAnalyticsApiTest > can get campaign performance     
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmAnalyticsApiTest.php:59
     55▕     public function test_can_get_campaign_performance(): void
     56▕     {
     57▕         $response = $this->getJson('/api/v1/crm/analytics/campaign-performance?start_date=2024-01-01&end_date=2024-12-31');
     58▕ 
  ➜  59▕         $response->assertStatus(200)
     60▕             ->assertJsonStructure([
     61▕                 'data' => [
     62▕                     'total_campaigns',
     63▕                     'performance_metrics',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CrmDashboardApiTest > can get dashboard analytics      
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/CrmDashboardApiTest.php:16
     12▕     public function test_can_get_dashboard_analytics(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/crm/dashboard/analytics');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     'total_customers',
     20▕                     'active_campaigns',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\CustomerApiTest > it can delete a customer             
  Failed asserting that a row in the table [customers] does not match the attributes {
    "id": "019c913b-98b0-7212-ac72-51e03b5cef6f"
}.

Found similar results: [
    {
        "id": "019c913b-98b0-7212-ac72-51e03b5cef6f"
    }
].

  at tests/Feature/CustomerApiTest.php:285
    281▕ 
    282▕         $response->assertStatus(200)
    283▕             ->assertJson(['message' => 'Customer deleted successfully']);
    284▕ 
  ➜ 285▕         $this->assertDatabaseMissing('customers', ['id' => $customer->id]);
    286▕     }
    287▕ 
    288▕     /** @test */
    289▕     public function it_enforces_tenant_isolation(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailCampaignApiTest > can list email campaigns        
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/EmailCampaignApiTest.php:16
     12▕     public function test_can_list_email_campaigns(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/outbound/email/campaigns');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     '*' => ['id', 'subject', 'status', 'sent_count']
     20▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailCampaignApiTest > can create email campaign       
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

TypeError: App\Http\Controllers\Api\OutboundCampaignController::store(): Argument #1 ($request) must be of type App\Http\Requests\StoreOutboundCampaignRequest, Illuminate\Http\Request given, called in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/EmailCampaignController.php on line 27 and defined in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/OutboundCampaignController.php:72
Stack trace:
#0 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/EmailCampaignController.php(27): App\Http\Controllers\Api\OutboundCampaignController->store(Object(Illuminate\Http\Request))
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\EmailCampaignController->store(Object(Illuminate\Http\Request))
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\EmailCampaignController), 'store')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/outboun...', Array, Array, Array, Array, '{"subject":"Tes...')
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/outboun...', Array, Array, 0)
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/EmailCampaignApiTest.php(33): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/outboun...', Array)
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\EmailCampaignApiTest->test_can_create_email_campaign()
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\EmailCampaignApiTest))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#52 {main}

----------------------------------------------------------------------------------

App\Http\Controllers\Api\OutboundCampaignController::store(): Argument #1 ($request) must be of type App\Http\Requests\StoreOutboundCampaignRequest, Illuminate\Http\Request given, called in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/EmailCampaignController.php on line 27

  at tests/Feature/EmailCampaignApiTest.php:35
     31▕         ];
     32▕ 
     33▕         $response = $this->postJson('/api/v1/outbound/email/campaigns', $data);
     34▕ 
  ➜  35▕         $response->assertStatus(201)
     36▕             ->assertJsonStructure(['data' => ['id', 'subject']]);
     37▕     }
     38▕ 
     39▕     public function test_can_list_email_templates(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailCampaignApiTest > can list email templates        
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/EmailCampaignApiTest.php:43
     39▕     public function test_can_list_email_templates(): void
     40▕     {
     41▕         $response = $this->getJson('/api/v1/outbound/email/templates');
     42▕ 
  ➜  43▕         $response->assertStatus(200)
     44▕             ->assertJsonStructure([
     45▕                 'data' => [
     46▕                     '*' => ['id', 'name', 'subject']
     47▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailCampaignApiTest > can create email template       
  Expected response status code [201] but received 422.
Failed asserting that 422 is identical to 201.

The following errors occurred during the last request:

{
    "error": "Validation failed",
    "errors": {
        "html_content": [
            "The html content field is required."
        ]
    }
}

  at tests/Feature/EmailCampaignApiTest.php:62
     58▕         ];
     59▕ 
     60▕         $response = $this->postJson('/api/v1/outbound/email/templates', $data);
     61▕ 
  ➜  62▕         $response->assertStatus(201)
     63▕             ->assertJsonStructure(['data' => ['id', 'name']]);
     64▕     }
     65▕ }
     66▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailFollowupTest > it finds unopen…  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 FOREIGN KEY constraint failed (Connection: sqlite, SQL: insert into "campaign_sends" ("smb_id", "campaign_id", "email", "subject", "status", "sent_at", "followup_triggered_at", "uuid", "updated_at", "created_at") values (019c913b-9956-71e1-92a1-f06ab95250aa, TEST-001, test@example.com, Test Email, sent, 2026-02-22 17:58:48, ?, 1cff06b6-0225-4dfb-ade6-493b09f062a2, 2026-02-24 19:58:48, 2026-02-24 19:58:48))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+19 vendor frames [22m
  20  tests/Feature/EmailFollowupTest.php:49

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailFollowupTest > it skips emails…  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 NOT NULL constraint failed: campaign_sends.uuid (Connection: sqlite, SQL: insert into "campaign_sends" ("smb_id", "campaign_id", "email", "subject", "status", "sent_at", "opened_at", "followup_triggered_at", "updated_at", "created_at") values (019c913b-9960-726b-8e24-44fbfb5fa97c, TEST-001, test@example.com, Test Email, sent, 2026-02-22 17:58:48, 2026-02-22 22:58:48, ?, 2026-02-24 19:58:48, 2026-02-24 19:58:48))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+19 vendor frames [22m
  20  tests/Feature/EmailFollowupTest.php:95

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailFollowupTest > it executes fol…  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 FOREIGN KEY constraint failed (Connection: sqlite, SQL: insert into "campaign_sends" ("smb_id", "campaign_id", "email", "subject", "status", "sent_at", "followup_count", "uuid", "updated_at", "created_at") values (019c913b-9969-73bb-a1b6-72da84754343, TEST-001, test@example.com, Test Email, sent, 2026-02-22 17:58:48, 0, 7ee0f113-8e96-47e0-baf7-e1ca2d4a1003, 2026-02-24 19:58:48, 2026-02-24 19:58:48))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+19 vendor frames [22m
  20  tests/Feature/EmailFollowupTest.php:126

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\EmailFollowupTest > it escalates af…  QueryException   
  SQLSTATE[23000]: Integrity constraint violation: 19 FOREIGN KEY constraint failed (Connection: sqlite, SQL: insert into "campaign_sends" ("smb_id", "campaign_id", "email", "subject", "status", "sent_at", "followup_count", "uuid", "updated_at", "created_at") values (019c913b-9974-70d1-8802-9b494bf531cd, TEST-001, test@example.com, Test Email, sent, 2026-02-22 17:58:48, 2, 6b992152-a3fd-4c20-af34-f0480956aef1, 2026-02-24 19:58:48, 2026-02-24 19:58:48))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+19 vendor frames [22m
  20  tests/Feature/EmailFollowupTest.php:164

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\KnowledgeApiTest > can list knowledge items            
  Failed asserting that an array has the key 'category_id'.

  at tests/Feature/KnowledgeApiTest.php:28
     24▕ 
     25▕         $response = $this->getJson('/api/v1/knowledge');
     26▕ 
     27▕         $response->assertStatus(200)
  ➜  28▕             ->assertJsonStructure([
     29▕                 'data' => [
     30▕                     '*' => ['id', 'title', 'content', 'category_id', 'created_at']
     31▕                 ]
     32▕             ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\KnowledgeApiTest > can create knowledge item           
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

Exception: OpenAI embedding failed with status 401 in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/OpenAIService.php:37
Stack trace:
#0 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Jobs/GenerateEmbedding.php(46): App\Services\OpenAIService->generateEmbedding('Test Knowledge\n...')
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(36): App\Jobs\GenerateEmbedding->handle(Object(App\Services\OpenAIService))
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Util.php(43): Illuminate\Container\BoundMethod::{closure:Illuminate\Container\BoundMethod::call():35}()
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(96): Illuminate\Container\Util::unwrapIfClosure(Object(Closure))
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(35): Illuminate\Container\BoundMethod::callBoundMethod(Object(Illuminate\Foundation\Application), Array, Object(Closure))
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(807): Illuminate\Container\BoundMethod::call(Object(Illuminate\Foundation\Application), Array, Array, NULL)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(129): Illuminate\Container\Container->call(Array)
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Bus\Dispatcher->{closure:Illuminate\Bus\Dispatcher::dispatchNow():126}(Object(App\Jobs\GenerateEmbedding))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(App\Jobs\GenerateEmbedding))
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(133): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/CallQueuedHandler.php(134): Illuminate\Bus\Dispatcher->dispatchNow(Object(App\Jobs\GenerateEmbedding), false)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Queue\CallQueuedHandler->{closure:Illuminate\Queue\CallQueuedHandler::dispatchThroughMiddleware():127}(Object(App\Jobs\GenerateEmbedding))
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(App\Jobs\GenerateEmbedding))
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/CallQueuedHandler.php(127): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/CallQueuedHandler.php(68): Illuminate\Queue\CallQueuedHandler->dispatchThroughMiddleware(Object(Illuminate\Queue\Jobs\SyncJob), Object(App\Jobs\GenerateEmbedding))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/Jobs/Job.php(102): Illuminate\Queue\CallQueuedHandler->call(Object(Illuminate\Queue\Jobs\SyncJob), Array)
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/SyncQueue.php(130): Illuminate\Queue\Jobs\Job->fire()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/SyncQueue.php(110): Illuminate\Queue\SyncQueue->executeJob(Object(App\Jobs\GenerateEmbedding), '', NULL)
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(246): Illuminate\Queue\SyncQueue->push(Object(App\Jobs\GenerateEmbedding), '', NULL)
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(230): Illuminate\Bus\Dispatcher->pushCommandToQueue(Object(Illuminate\Queue\SyncQueue), Object(App\Jobs\GenerateEmbedding))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(80): Illuminate\Bus\Dispatcher->dispatchToQueue(Object(App\Jobs\GenerateEmbedding))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Bus/PendingDispatch.php(251): Illuminate\Bus\Dispatcher->dispatch(Object(App\Jobs\GenerateEmbedding))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Bus/Dispatchable.php(19): Illuminate\Foundation\Bus\PendingDispatch->__destruct()
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/KnowledgeController.php(79): App\Jobs\GenerateEmbedding::dispatch('019c913b-9994-7...')
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\KnowledgeController->store(Object(App\Http\Requests\StoreKnowledgeRequest))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\KnowledgeController), 'store')
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/knowled...', Array, Array, Array, Array, '{"title":"Test ...')
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/knowled...', Array, Array, 0)
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/KnowledgeApiTest.php(46): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/knowled...', Array)
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\KnowledgeApiTest->test_can_create_knowledge_item()
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#65 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#66 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\KnowledgeApiTest))
#67 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#68 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#69 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#70 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#71 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#72 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#73 {main}

----------------------------------------------------------------------------------

OpenAI embedding failed with status 401

  at tests/Feature/KnowledgeApiTest.php:48
     44▕         ];
     45▕ 
     46▕         $response = $this->postJson('/api/v1/knowledge', $data);
     47▕ 
  ➜  48▕         $response->assertStatus(201)
     49▕             ->assertJsonStructure(['data' => ['id', 'title', 'content']]);
     50▕ 
     51▕         $this->assertDatabaseHas('knowledge_base', [
     52▕             'title' => 'Test Knowledge',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\KnowledgeApiTest > can update knowledge item           
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: OpenAI embedding failed with status 401 in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/OpenAIService.php:37
Stack trace:
#0 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Jobs/GenerateEmbedding.php(46): App\Services\OpenAIService->generateEmbedding('Updated Title\n\n...')
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(36): App\Jobs\GenerateEmbedding->handle(Object(App\Services\OpenAIService))
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Util.php(43): Illuminate\Container\BoundMethod::{closure:Illuminate\Container\BoundMethod::call():35}()
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(96): Illuminate\Container\Util::unwrapIfClosure(Object(Closure))
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/BoundMethod.php(35): Illuminate\Container\BoundMethod::callBoundMethod(Object(Illuminate\Foundation\Application), Array, Object(Closure))
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(807): Illuminate\Container\BoundMethod::call(Object(Illuminate\Foundation\Application), Array, Array, NULL)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(129): Illuminate\Container\Container->call(Array)
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Bus\Dispatcher->{closure:Illuminate\Bus\Dispatcher::dispatchNow():126}(Object(App\Jobs\GenerateEmbedding))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(App\Jobs\GenerateEmbedding))
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(133): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/CallQueuedHandler.php(134): Illuminate\Bus\Dispatcher->dispatchNow(Object(App\Jobs\GenerateEmbedding), false)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Queue\CallQueuedHandler->{closure:Illuminate\Queue\CallQueuedHandler::dispatchThroughMiddleware():127}(Object(App\Jobs\GenerateEmbedding))
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(App\Jobs\GenerateEmbedding))
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/CallQueuedHandler.php(127): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/CallQueuedHandler.php(68): Illuminate\Queue\CallQueuedHandler->dispatchThroughMiddleware(Object(Illuminate\Queue\Jobs\SyncJob), Object(App\Jobs\GenerateEmbedding))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/Jobs/Job.php(102): Illuminate\Queue\CallQueuedHandler->call(Object(Illuminate\Queue\Jobs\SyncJob), Array)
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/SyncQueue.php(130): Illuminate\Queue\Jobs\Job->fire()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Queue/SyncQueue.php(110): Illuminate\Queue\SyncQueue->executeJob(Object(App\Jobs\GenerateEmbedding), '', NULL)
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(246): Illuminate\Queue\SyncQueue->push(Object(App\Jobs\GenerateEmbedding), '', NULL)
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(230): Illuminate\Bus\Dispatcher->pushCommandToQueue(Object(Illuminate\Queue\SyncQueue), Object(App\Jobs\GenerateEmbedding))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Bus/Dispatcher.php(80): Illuminate\Bus\Dispatcher->dispatchToQueue(Object(App\Jobs\GenerateEmbedding))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Bus/PendingDispatch.php(251): Illuminate\Bus\Dispatcher->dispatch(Object(App\Jobs\GenerateEmbedding))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Bus/Dispatchable.php(19): Illuminate\Foundation\Bus\PendingDispatch->__destruct()
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/KnowledgeController.php(137): App\Jobs\GenerateEmbedding::dispatch('019c913b-9a78-7...')
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\KnowledgeController->update(Object(Illuminate\Http\Request), '019c913b-9a78-7...')
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\KnowledgeController), 'update')
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('PUT', '/api/v1/knowled...', Array, Array, Array, Array, '{"title":"Updat...')
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(441): Illuminate\Foundation\Testing\TestCase->json('PUT', '/api/v1/knowled...', Array, Array, 0)
#62 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/KnowledgeApiTest.php(81): Illuminate\Foundation\Testing\TestCase->putJson('/api/v1/knowled...', Array)
#63 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\KnowledgeApiTest->test_can_update_knowledge_item()
#64 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#65 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#66 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\KnowledgeApiTest))
#67 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#68 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#69 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#70 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#71 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#72 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#73 {main}

----------------------------------------------------------------------------------

OpenAI embedding failed with status 401

  at tests/Feature/KnowledgeApiTest.php:83
     79▕         ];
     80▕ 
     81▕         $response = $this->putJson("/api/v1/knowledge/{$knowledge->id}", $data);
     82▕ 
  ➜  83▕         $response->assertStatus(200)
     84▕             ->assertJson([
     85▕                 'data' => [
     86▕                     'title' => 'Updated Title',
     87▕                     'content' => 'Updated content',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\KnowledgeApiTest > can delete knowledge item           
  Expected response status code [204] but received 200.
Failed asserting that 200 is identical to 204.

  at tests/Feature/KnowledgeApiTest.php:103
     99▕         $knowledge = Knowledge::factory()->create();
    100▕ 
    101▕         $response = $this->deleteJson("/api/v1/knowledge/{$knowledge->id}");
    102▕ 
  ➜ 103▕         $response->assertStatus(204);
    104▕ 
    105▕         $this->assertDatabaseMissing('knowledge_base', [
    106▕             'id' => $knowledge->id,
    107▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\KnowledgeApiTest > can vote on knowledge item          
  Expected response status code [200] but received 422.
Failed asserting that 422 is identical to 200.

The following errors occurred during the last request:

{
    "errors": {
        "vote": [
            "The vote field is required."
        ]
    }
}

  at tests/Feature/KnowledgeApiTest.php:118
    114▕         $response = $this->postJson("/api/v1/knowledge/{$knowledge->id}/vote", [
    115▕             'helpful' => true,
    116▕         ]);
    117▕ 
  ➜ 118▕         $response->assertStatus(200);
    119▕         // Add assertions based on your vote implementation
    120▕     }
    121▕ 
    122▕     public function test_can_list_faq_categories(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\KnowledgeApiTest > can create faq category             
  Expected response status code [201] but received 422.
Failed asserting that 422 is identical to 201.

The following errors occurred during the last request:

{
    "errors": {
        "slug": [
            "The slug field is required."
        ]
    }
}

  at tests/Feature/KnowledgeApiTest.php:146
    142▕         ];
    143▕ 
    144▕         $response = $this->postJson('/api/v1/faq-categories', $data);
    145▕ 
  ➜ 146▕         $response->assertStatus(201)
    147▕             ->assertJsonStructure(['data' => ['id', 'name', 'description']]);
    148▕ 
    149▕         $this->assertDatabaseHas('faq_categories', [
    150▕             'name' => 'Test Category',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OrderApiTest > can list orders                         
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/v1/orders', Array, Array, Array, Array, '[]')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/v1/orders', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/OrderApiTest.php(19): Illuminate\Foundation\Testing\TestCase->getJson('/api/v1/orders')
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\OrderApiTest->test_can_list_orders()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\OrderApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/OrderApiTest.php:21
     17▕         Order::factory()->count(3)->create();
     18▕ 
     19▕         $response = $this->getJson('/api/v1/orders');
     20▕ 
  ➜  21▕         $response->assertStatus(200)
     22▕             ->assertJsonStructure([
     23▕                 'data' => [
     24▕                     '*' => ['id', 'customer_id', 'total_amount', 'status', 'created_at']
     25▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OrderApiTest > can show order                          
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/v1/orders/...', Array, Array, Array, Array, '[]')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/v1/orders/...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/OrderApiTest.php(33): Illuminate\Foundation\Testing\TestCase->getJson('/api/v1/orders/...')
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\OrderApiTest->test_can_show_order()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\OrderApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/OrderApiTest.php:35
     31▕         $order = Order::factory()->create();
     32▕ 
     33▕         $response = $this->getJson("/api/v1/orders/{$order->id}");
     34▕ 
  ➜  35▕         $response->assertStatus(200)
     36▕             ->assertJson([
     37▕                 'data' => [
     38▕                     'id' => $order->id,
     39▕                     'customer_id' => $order->customer_id,

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OrderApiTest > can create…  InvalidArgumentException   
  Unknown format "string"

  at vendor/fakerphp/faker/src/Faker/Generator.php:743
    739▕                 return $this->formatters[$format];
    740▕             }
    741▕         }
    742▕ 
  ➜ 743▕         throw new \InvalidArgumentException(sprintf('Unknown format "%s"', $format));
    744▕     }
    745▕ 
    746▕     /**
    747▕      * Replaces tokens ('{{ tokenName }}') with the result from the token method call

      [2m+4 vendor frames [22m
  5   database/factories/ServiceFactory.php:48
      [2m+7 vendor frames [22m
  13  tests/Feature/OrderApiTest.php:47

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OrderApiTest > checkout requires valid customer        
  Expected response status code [422] but received 500.
Failed asserting that 500 is identical to 422.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/orders/...', Array, Array, Array, Array, '{"customer_id":...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/orders/...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/OrderApiTest.php(79): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/orders/...', Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\OrderApiTest->test_checkout_requires_valid_customer()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\OrderApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/OrderApiTest.php:81
     77▕         ];
     78▕ 
     79▕         $response = $this->postJson('/api/v1/orders/checkout', $data);
     80▕ 
  ➜  81▕         $response->assertStatus(422); // Validation error
     82▕     }
     83▕ 
     84▕     public function test_checkout_requires_items(): void
     85▕     {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OrderApiTest > checkout requires items                 
  Expected response status code [422] but received 500.
Failed asserting that 500 is identical to 422.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/orders/...', Array, Array, Array, Array, '{"customer_id":...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/orders/...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/OrderApiTest.php(93): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/orders/...', Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\OrderApiTest->test_checkout_requires_items()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\OrderApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/OrderApiTest.php:95
     91▕         ];
     92▕ 
     93▕         $response = $this->postJson('/api/v1/orders/checkout', $data);
     94▕ 
  ➜  95▕         $response->assertStatus(422); // Validation error
     96▕     }
     97▕ }
     98▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutboundCampaignApiTest > can list outbound campaig…   
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/OutboundCampaignApiTest.php:16
     12▕     public function test_can_list_outbound_campaigns(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/outbound/campaigns');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     '*' => ['id', 'name', 'status', 'type']
     20▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutboundCampaignApiTest > can create outbound campa…   
  Expected response status code [201] but received 422.
Failed asserting that 422 is identical to 201.

The following errors occurred during the last request:

{
    "message": "The message field is required. (and 2 more errors)",
    "errors": {
        "message": [
            "The message field is required."
        ],
        "subject": [
            "The subject field is required when type is email."
        ],
        "template_id": [
            "The template id field must be a valid UUID."
        ]
    }
}

  at tests/Feature/OutboundCampaignApiTest.php:35
     31▕         ];
     32▕ 
     33▕         $response = $this->postJson('/api/v1/outbound/campaigns', $data);
     34▕ 
  ➜  35▕         $response->assertStatus(201)
     36▕             ->assertJsonStructure(['data' => ['id', 'name']]);
     37▕     }
     38▕ 
     39▕     public function test_can_show_outbound_campaign(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutboundCampaignApiTest > can show outbound campaig…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/OutboundCampaignApiTest.php:45
     41▕         $campaignId = 'test-campaign-id';
     42▕ 
     43▕         $response = $this->getJson("/api/v1/outbound/campaigns/{$campaignId}");
     44▕ 
  ➜  45▕         $response->assertStatus(200)
     46▕             ->assertJsonStructure(['data']);
     47▕     }
     48▕ 
     49▕     public function test_can_update_outbound_campaign(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutboundCampaignApiTest > can update outbound campa…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/OutboundCampaignApiTest.php:60
     56▕         ];
     57▕ 
     58▕         $response = $this->putJson("/api/v1/outbound/campaigns/{$campaignId}", $data);
     59▕ 
  ➜  60▕         $response->assertStatus(200)
     61▕             ->assertJsonStructure(['data', 'message']);
     62▕     }
     63▕ 
     64▕     public function test_can_get_campaign_recipients(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutboundCampaignApiTest > can get campaign recipien…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/OutboundCampaignApiTest.php:70
     66▕         $campaignId = 'test-campaign-id';
     67▕ 
     68▕         $response = $this->getJson("/api/v1/outbound/campaigns/{$campaignId}/recipients");
     69▕ 
  ➜  70▕         $response->assertStatus(200)
     71▕             ->assertJsonStructure([
     72▕                 'data' => [
     73▕                     '*' => ['id', 'email', 'status']
     74▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutboundCampaignApiTest > can start campaign           
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/OutboundCampaignApiTest.php:84
     80▕         $campaignId = 'test-campaign-id';
     81▕ 
     82▕         $response = $this->postJson("/api/v1/outbound/campaigns/{$campaignId}/start", []);
     83▕ 
  ➜  84▕         $response->assertStatus(200)
     85▕             ->assertJsonStructure(['data', 'message']);
     86▕     }
     87▕ 
     88▕     public function test_can_get_campaign_analytics(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\OutboundCampaignApiTest > can get campaign analytic…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/OutboundCampaignApiTest.php:94
     90▕         $campaignId = 'test-campaign-id';
     91▕ 
     92▕         $response = $this->getJson("/api/v1/outbound/campaigns/{$campaignId}/analytics");
     93▕ 
  ➜  94▕         $response->assertStatus(200)
     95▕             ->assertJsonStructure([
     96▕                 'data' => [
     97▕                     'sent',
     98▕                     'delivered',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PersonalityApiTest > can list personalities            
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/PersonalityApiTest.php:17
     13▕     public function test_can_list_personalities(): void
     14▕     {
     15▕         $response = $this->getJson('/api/v1/personalities');
     16▕ 
  ➜  17▕         $response->assertStatus(200)
     18▕             ->assertJsonStructure([
     19▕                 'data' => [
     20▕                     '*' => ['id', 'name', 'description']
     21▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PersonalityApiTest > can create personality            
  Expected response status code [201] but received 422.
Failed asserting that 422 is identical to 201.

The following errors occurred during the last request:

{
    "error": "Validation failed",
    "errors": {
        "identity": [
            "The identity field is required."
        ],
        "persona_description": [
            "The persona description field is required."
        ],
        "communication_style": [
            "The communication style field is required."
        ],
        "system_prompt": [
            "The system prompt field is required."
        ]
    }
}

  at tests/Feature/PersonalityApiTest.php:35
     31▕         ];
     32▕ 
     33▕         $response = $this->postJson('/api/v1/personalities', $data);
     34▕ 
  ➜  35▕         $response->assertStatus(201)
     36▕             ->assertJsonStructure(['data' => ['id', 'name']]);
     37▕     }
     38▕ 
     39▕     public function test_can_show_personality(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PersonalityApiTest > can show personality              
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/PersonalityApiTest.php:47
     43▕ 
     44▕         $response = $this->getJson("/api/v1/personalities/{$personalityId}");
     45▕ 
     46▕         // Adjust based on actual implementation
  ➜  47▕         $response->assertStatus(200);
     48▕     }
     49▕ 
     50▕     public function test_can_assign_personality_to_customer(): void
     51▕     {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PersonalityApiTest > can assign personality to cust…   
  Expected response status code [200] but received 422.
Failed asserting that 422 is identical to 200.

The following errors occurred during the last request:

{
    "error": "Validation failed",
    "errors": {
        "personality_id": [
            "The personality id field must be a valid UUID."
        ]
    }
}

  at tests/Feature/PersonalityApiTest.php:62
     58▕         ];
     59▕ 
     60▕         $response = $this->postJson('/api/v1/personalities/assign', $data);
     61▕ 
  ➜  62▕         $response->assertStatus(200)
     63▕             ->assertJsonStructure(['data', 'message']);
     64▕     }
     65▕ 
     66▕     public function test_can_get_customer_personality(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PersonalityApiTest > can generate personality respo…   
  Failed asserting that an array contains 404.

  at tests/Feature/PersonalityApiTest.php:87
     83▕ 
     84▕         $response = $this->postJson('/api/v1/personalities/test-personality-id/generate-response', $data);
     85▕ 
     86▕         // May return 200 or 500 depending on AI service availability
  ➜  87▕         $this->assertContains($response->status(), [200, 500]);
     88▕     }
     89▕ }
     90▕

  1   tests/Feature/PersonalityApiTest.php:87

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PhoneCampaignApiTest > can list phone campaigns        
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/PhoneCampaignApiTest.php:16
     12▕     public function test_can_list_phone_campaigns(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/outbound/phone/campaigns');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     '*' => ['id', 'name', 'status', 'call_count']
     20▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PhoneCampaignApiTest > can create phone campaign       
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

TypeError: App\Http\Controllers\Api\OutboundCampaignController::store(): Argument #1 ($request) must be of type App\Http\Requests\StoreOutboundCampaignRequest, Illuminate\Http\Request given, called in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/PhoneCampaignController.php on line 28 and defined in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/OutboundCampaignController.php:72
Stack trace:
#0 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/PhoneCampaignController.php(28): App\Http\Controllers\Api\OutboundCampaignController->store(Object(Illuminate\Http\Request))
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\PhoneCampaignController->store(Object(Illuminate\Http\Request))
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\PhoneCampaignController), 'store')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/outboun...', Array, Array, Array, Array, '{"name":"Test P...')
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/outboun...', Array, Array, 0)
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/PhoneCampaignApiTest.php(33): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/outboun...', Array)
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\PhoneCampaignApiTest->test_can_create_phone_campaign()
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\PhoneCampaignApiTest))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#52 {main}

----------------------------------------------------------------------------------

App\Http\Controllers\Api\OutboundCampaignController::store(): Argument #1 ($request) must be of type App\Http\Requests\StoreOutboundCampaignRequest, Illuminate\Http\Request given, called in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/PhoneCampaignController.php on line 28

  at tests/Feature/PhoneCampaignApiTest.php:35
     31▕         ];
     32▕ 
     33▕         $response = $this->postJson('/api/v1/outbound/phone/campaigns', $data);
     34▕ 
  ➜  35▕         $response->assertStatus(201)
     36▕             ->assertJsonStructure(['data' => ['id', 'name']]);
     37▕     }
     38▕ 
     39▕     public function test_can_list_phone_scripts(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PhoneCampaignApiTest > can list phone scripts          
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/PhoneCampaignApiTest.php:43
     39▕     public function test_can_list_phone_scripts(): void
     40▕     {
     41▕         $response = $this->getJson('/api/v1/outbound/phone/scripts');
     42▕ 
  ➜  43▕         $response->assertStatus(200)
     44▕             ->assertJsonStructure([
     45▕                 'data' => [
     46▕                     '*' => ['id', 'name', 'content']
     47▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PhoneCampaignApiTest > can create phone script         
  Expected response status code [201] but received 422.
Failed asserting that 422 is identical to 201.

The following errors occurred during the last request:

{
    "error": "Validation failed",
    "errors": {
        "script": [
            "The script field is required."
        ]
    }
}

  at tests/Feature/PhoneCampaignApiTest.php:61
     57▕         ];
     58▕ 
     59▕         $response = $this->postJson('/api/v1/outbound/phone/scripts', $data);
     60▕ 
  ➜  61▕         $response->assertStatus(201)
     62▕             ->assertJsonStructure(['data' => ['id', 'name']]);
     63▕     }
     64▕ 
     65▕     public function test_can_update_call_status(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PhoneCampaignApiTest > can update call status          
  Failed asserting that an array has the key 'data'.

  at tests/Feature/PhoneCampaignApiTest.php:78
     74▕ 
     75▕         $response = $this->postJson("/api/v1/outbound/phone/campaigns/{$campaignId}/call-status", $data);
     76▕ 
     77▕         $response->assertStatus(200)
  ➜  78▕             ->assertJsonStructure(['data', 'message']);
     79▕     }
     80▕ }
     81▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PipelineStageTransitionTest > it handles trial acce…   
  Failed asserting that 1 is true.

  at tests/Feature/PipelineStageTransitionTest.php:124
    120▕ 
    121▕         $this->service->handleTrialAcceptance($customer);
    122▕ 
    123▕         $customer->refresh();
  ➜ 124▕         $this->assertTrue($customer->trial_active);
    125▕         $this->assertNotNull($customer->trial_started_at);
    126▕         $this->assertNotNull($customer->trial_ends_at);
    127▕         $this->assertEquals(90, $customer->trial_started_at->diffInDays($customer->trial_ends_at));
    128▕     }

  1   tests/Feature/PipelineStageTransitionTest.php:124

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PresentationApiTest > can list presentation templat…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/ElevenLabsService.php:15
Stack trace:
#0 [internal function]: App\Services\ElevenLabsService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\El...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\El...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\El...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\El...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\El...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/v1/present...', Array, Array, Array, Array, '[]')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/v1/present...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/PresentationApiTest.php(18): Illuminate\Foundation\Testing\TestCase->getJson('/api/v1/present...')
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\PresentationApiTest->test_can_list_presentation_templates()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\PresentationApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string

  at tests/Feature/PresentationApiTest.php:20
     16▕         PresentationTemplate::factory()->count(3)->create();
     17▕ 
     18▕         $response = $this->getJson('/api/v1/presentations/templates');
     19▕ 
  ➜  20▕         $response->assertStatus(200)
     21▕             ->assertJsonStructure([
     22▕                 'data' => [
     23▕                     '*' => ['id', 'name', 'description', 'purpose', 'slide_count']
     24▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PresentationApiTest > can show presentation templat…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/ElevenLabsService.php:15
Stack trace:
#0 [internal function]: App\Services\ElevenLabsService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\El...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\El...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\El...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\El...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\El...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/v1/present...', Array, Array, Array, Array, '[]')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/v1/present...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/PresentationApiTest.php(32): Illuminate\Foundation\Testing\TestCase->getJson('/api/v1/present...')
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\PresentationApiTest->test_can_show_presentation_template()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\PresentationApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string

  at tests/Feature/PresentationApiTest.php:34
     30▕         $template = PresentationTemplate::factory()->create();
     31▕ 
     32▕         $response = $this->getJson("/api/v1/presentations/templates/{$template->id}");
     33▕ 
  ➜  34▕         $response->assertStatus(200)
     35▕             ->assertJson([
     36▕                 'data' => [
     37▕                     'id' => $template->id,
     38▕                     'name' => $template->name,

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PresentationApiTest > can create presentation from…    
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/ElevenLabsService.php:15
Stack trace:
#0 [internal function]: App\Services\ElevenLabsService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\El...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\El...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\El...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\El...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\El...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/present...', Array, Array, Array, Array, '{"tenant_id":"0...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/present...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/PresentationApiTest.php(56): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/present...', Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\PresentationApiTest->test_can_create_presentation_from_template()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\PresentationApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string

  at tests/Feature/PresentationApiTest.php:58
     54▕         ];
     55▕ 
     56▕         $response = $this->postJson('/api/v1/presentations/generate', $data);
     57▕ 
  ➜  58▕         $response->assertStatus(201)
     59▕             ->assertJsonStructure(['data' => ['id', 'template_id']]);
     60▕ 
     61▕         $this->assertDatabaseHas('generated_presentations', [
     62▕             'template_id' => $template->id,

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PresentationApiTest > can show gene…  QueryException   
  SQLSTATE[HY000]: General error: 1 table generated_presentations has no column named updated_at (Connection: sqlite, SQL: insert into "generated_presentations" ("template_id", "tenant_id", "customer_id", "presentation_json", "audio_base_url", "audio_generated", "audio_generated_at", "input_hash", "expires_at", "view_count", "avg_completion_rate", "last_viewed_at", "id", "updated_at", "created_at") values (efe57623-e3e3-44c0-b46a-0c8b216d8ddd, 00000000-0000-0000-0000-000000000000, ?, {"title":"Distinctio fuga eum.","slides":[{"type":"hero","title":"Iste quae sit.","content":"Voluptatibus nulla nobis pariatur libero iusto aspernatur. Ducimus rerum neque sed accusamus ratione. Dolorum et nihil magni soluta."}]}, http://klein.com/quasi-totam-ullam-ut-harum-dolor-ullam-tempora, 0, ?, ?, ?, 0, ?, ?, 019c913b-9cb7-73c6-8c21-317094b18141, 2026-02-24 19:58:49, 2026-02-24 19:58:49))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+15 vendor frames [22m
  16  tests/Feature/PresentationApiTest.php:68

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PresentationApiTest > can generate…   QueryException   
  SQLSTATE[HY000]: General error: 1 table generated_presentations has no column named updated_at (Connection: sqlite, SQL: insert into "generated_presentations" ("template_id", "tenant_id", "customer_id", "presentation_json", "audio_base_url", "audio_generated", "audio_generated_at", "input_hash", "expires_at", "view_count", "avg_completion_rate", "last_viewed_at", "id", "updated_at", "created_at") values (715aaaa5-9627-45ae-be54-bb68f7869d10, 00000000-0000-0000-0000-000000000000, ?, {"title":"Quae quo voluptas.","slides":[{"type":"hero","title":"Et tempora a non.","content":"Beatae ut neque doloremque quam eos nobis nulla. Porro qui magnam doloribus corporis. Minima eius et quo voluptas."}]}, http://www.collier.com/, 0, ?, ?, 2026-03-09 21:33:43, 0, ?, ?, 019c913b-9cbf-722e-8363-54d05a72fb15, 2026-02-24 19:58:49, 2026-02-24 19:58:49))

  at vendor/laravel/framework/src/Illuminate/Database/Connection.php:826
    822▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    823▕                 );
    824▕             }
    825▕ 
  ➜ 826▕             throw new QueryException(
    827▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    828▕             );
    829▕         }
    830▕     }

      [2m+15 vendor frames [22m
  16  tests/Feature/PresentationApiTest.php:82

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ProvisioningTaskApiTest > can retry failed task        
  Failed asserting that a row in the table [provisioning_tasks] matches the attributes {
    "id": 1,
    "status": "queued",
    "failure_reason": null
}.

Found similar results: [
    {
        "id": 1,
        "status": "completed",
        "failure_reason": null
    }
].

  at tests/Feature/ProvisioningTaskApiTest.php:26
     22▕ 
     23▕         $response->assertStatus(200)
     24▕             ->assertJson(['message' => 'Provisioning retry started']);
     25▕ 
  ➜  26▕         $this->assertDatabaseHas('provisioning_tasks', [
     27▕             'id' => $task->id,
     28▕             'status' => 'queued',
     29▕             'failure_reason' => null,
     30▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PublishingApiTest > can get publishing dashboard       
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/PublishingApiTest.php:16
     12▕     public function test_can_get_publishing_dashboard(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/publishing/dashboard');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     'stats',
     20▕                     'recent_content',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PublishingApiTest > can get publishing calendar        
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/PublishingApiTest.php:30
     26▕     public function test_can_get_publishing_calendar(): void
     27▕     {
     28▕         $response = $this->getJson('/api/v1/publishing/calendar?month=2024-12');
     29▕ 
  ➜  30▕         $response->assertStatus(200)
     31▕             ->assertJsonStructure([
     32▕                 'data' => [
     33▕                     '*' => ['date', 'content', 'status']
     34▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PublishingApiTest > can get publishing analytics       
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/PublishingApiTest.php:42
     38▕     public function test_can_get_publishing_analytics(): void
     39▕     {
     40▕         $response = $this->getJson('/api/v1/publishing/analytics?start_date=2024-01-01&end_date=2024-12-31');
     41▕ 
  ➜  42▕         $response->assertStatus(200)
     43▕             ->assertJsonStructure([
     44▕                 'data' => [
     45▕                     'total_published',
     46▕                     'engagement_metrics',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\PublishingApiTest > can publish content                
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/PublishingApiTest.php:63
     59▕         ];
     60▕ 
     61▕         $response = $this->postJson("/api/v1/publishing/content/{$contentId}/publish", $data);
     62▕ 
  ➜  63▕         $response->assertStatus(200)
     64▕             ->assertJsonStructure(['data', 'message']);
     65▕     }
     66▕ }
     67▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SMSCampaignApiTest > can list sms campaigns            
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/SMSCampaignApiTest.php:16
     12▕     public function test_can_list_sms_campaigns(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/outbound/sms/campaigns');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     '*' => ['id', 'name', 'status', 'sent_count']
     20▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SMSCampaignApiTest > can create sms campaign           
  Expected response status code [201] but received 500.
Failed asserting that 500 is identical to 201.

The following exception occurred during the last request:

TypeError: App\Http\Controllers\Api\OutboundCampaignController::store(): Argument #1 ($request) must be of type App\Http\Requests\StoreOutboundCampaignRequest, Illuminate\Http\Request given, called in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/SMSCampaignController.php on line 28 and defined in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/OutboundCampaignController.php:72
Stack trace:
#0 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/SMSCampaignController.php(28): App\Http\Controllers\Api\OutboundCampaignController->store(Object(Illuminate\Http\Request))
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(46): App\Http\Controllers\Api\SMSCampaignController->store(Object(Illuminate\Http\Request))
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(265): Illuminate\Routing\ControllerDispatcher->dispatch(Object(Illuminate\Routing\Route), Object(App\Http\Controllers\Api\SMSCampaignController), 'store')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(63): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Auth\Middleware\Authenticate->handle(Object(Illuminate\Http\Request), Object(Closure), 'sanctum')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/outboun...', Array, Array, Array, Array, '{"name":"Test S...')
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/outboun...', Array, Array, 0)
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/SMSCampaignApiTest.php(33): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/outboun...', Array)
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\SMSCampaignApiTest->test_can_create_sms_campaign()
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\SMSCampaignApiTest))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#52 {main}

----------------------------------------------------------------------------------

App\Http\Controllers\Api\OutboundCampaignController::store(): Argument #1 ($request) must be of type App\Http\Requests\StoreOutboundCampaignRequest, Illuminate\Http\Request given, called in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Http/Controllers/Api/SMSCampaignController.php on line 28

  at tests/Feature/SMSCampaignApiTest.php:35
     31▕         ];
     32▕ 
     33▕         $response = $this->postJson('/api/v1/outbound/sms/campaigns', $data);
     34▕ 
  ➜  35▕         $response->assertStatus(201)
     36▕             ->assertJsonStructure(['data' => ['id', 'name']]);
     37▕     }
     38▕ 
     39▕     public function test_can_list_sms_templates(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SMSCampaignApiTest > can list sms templates            
  Expected response status code [200] but received 400.
Failed asserting that 400 is identical to 200.

  at tests/Feature/SMSCampaignApiTest.php:43
     39▕     public function test_can_list_sms_templates(): void
     40▕     {
     41▕         $response = $this->getJson('/api/v1/outbound/sms/templates');
     42▕ 
  ➜  43▕         $response->assertStatus(200)
     44▕             ->assertJsonStructure([
     45▕                 'data' => [
     46▕                     '*' => ['id', 'name', 'message']
     47▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SMSCampaignApiTest > can update sms status             
  Failed asserting that an array has the key 'data'.

  at tests/Feature/SMSCampaignApiTest.php:77
     73▕ 
     74▕         $response = $this->postJson("/api/v1/outbound/sms/campaigns/{$campaignId}/sms-status", $data);
     75▕ 
     76▕         $response->assertStatus(200)
  ➜  77▕             ->assertJsonStructure(['data', 'message']);
     78▕     }
     79▕ }
     80▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SMSWebhookTest > it processes sms webhook              
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/SMSWebhookTest.php:37
     33▕             'To' => '+1987654321',
     34▕             'Body' => 'Yes, I am interested',
     35▕         ]);
     36▕ 
  ➜  37▕         $response->assertStatus(200);
     38▕         Event::assertDispatched(SMSReceived::class);
     39▕     }
     40▕ 
     41▕     /** @test */

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SMSWebhookTest > it handles unknown phone number       
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/SMSWebhookTest.php:66
     62▕             'Body' => 'Test message',
     63▕         ]);
     64▕ 
     65▕         // Should handle gracefully - either create customer or return appropriate response
  ➜  66▕         $response->assertStatus(200);
     67▕     }
     68▕ }
     69▕ 
     70▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SearchApiTest > can get embedding status               
  Failed asserting that an array has the key 'embedded'.

  at tests/Feature/SearchApiTest.php:82
     78▕ 
     79▕         $response = $this->getJson('/api/v1/search/status?tenant_id=00000000-0000-0000-0000-000000000000');
     80▕ 
     81▕         $response->assertStatus(200)
  ➜  82▕             ->assertJsonStructure([
     83▕                 'data' => [
     84▕                     'total',
     85▕                     'embedded',
     86▕                     'pending',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceApiTest > can list…  InvalidArgumentException   
  Unknown format "string"

  at vendor/fakerphp/faker/src/Faker/Generator.php:743
    739▕                 return $this->formatters[$format];
    740▕             }
    741▕         }
    742▕ 
  ➜ 743▕         throw new \InvalidArgumentException(sprintf('Unknown format "%s"', $format));
    744▕     }
    745▕ 
    746▕     /**
    747▕      * Replaces tokens ('{{ tokenName }}') with the result from the token method call

      [2m+4 vendor frames [22m
  5   database/factories/ServiceFactory.php:49
      [2m+8 vendor frames [22m
  14  tests/Feature/ServiceApiTest.php:16

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceApiTest > can show…  InvalidArgumentException   
  Unknown format "string"

  at vendor/fakerphp/faker/src/Faker/Generator.php:743
    739▕                 return $this->formatters[$format];
    740▕             }
    741▕         }
    742▕ 
  ➜ 743▕         throw new \InvalidArgumentException(sprintf('Unknown format "%s"', $format));
    744▕     }
    745▕ 
    746▕     /**
    747▕      * Replaces tokens ('{{ tokenName }}') with the result from the token method call

      [2m+4 vendor frames [22m
  5   database/factories/ServiceFactory.php:48
      [2m+7 vendor frames [22m
  13  tests/Feature/ServiceApiTest.php:30

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceApiTest > can filt…  InvalidArgumentException   
  Unknown format "string"

  at vendor/fakerphp/faker/src/Faker/Generator.php:743
    739▕                 return $this->formatters[$format];
    740▕             }
    741▕         }
    742▕ 
  ➜ 743▕         throw new \InvalidArgumentException(sprintf('Unknown format "%s"', $format));
    744▕     }
    745▕ 
    746▕     /**
    747▕      * Replaces tokens ('{{ tokenName }}') with the result from the token method call

      [2m+4 vendor frames [22m
  5   database/factories/ServiceFactory.php:48
      [2m+9 vendor frames [22m
  15  tests/Feature/ServiceApiTest.php:46

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceApiTest > can filt…  InvalidArgumentException   
  Unknown format "string"

  at vendor/fakerphp/faker/src/Faker/Generator.php:743
    739▕                 return $this->formatters[$format];
    740▕             }
    741▕         }
    742▕ 
  ➜ 743▕         throw new \InvalidArgumentException(sprintf('Unknown format "%s"', $format));
    744▕     }
    745▕ 
    746▕     /**
    747▕      * Replaces tokens ('{{ tokenName }}') with the result from the token method call

      [2m+4 vendor frames [22m
  5   database/factories/ServiceFactory.php:48
      [2m+9 vendor frames [22m
  15  tests/Feature/ServiceApiTest.php:58

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceApiTest > can filt…  InvalidArgumentException   
  Unknown format "string"

  at vendor/fakerphp/faker/src/Faker/Generator.php:743
    739▕                 return $this->formatters[$format];
    740▕             }
    741▕         }
    742▕ 
  ➜ 743▕         throw new \InvalidArgumentException(sprintf('Unknown format "%s"', $format));
    744▕     }
    745▕ 
    746▕     /**
    747▕      * Replaces tokens ('{{ tokenName }}') with the result from the token method call

      [2m+4 vendor frames [22m
  5   database/factories/ServiceFactory.php:48
      [2m+9 vendor frames [22m
  15  tests/Feature/ServiceApiTest.php:72

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceCategoryApiTest > can list service categorie…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/ServiceCategoryApiTest.php:20
     16▕         ServiceCategory::factory()->count(5)->create();
     17▕ 
     18▕         $response = $this->getJson('/api/v1/services/categories');
     19▕ 
  ➜  20▕         $response->assertStatus(200)
     21▕             ->assertJsonStructure([
     22▕                 'data' => [
     23▕                     '*' => ['id', 'name', 'slug', 'description']
     24▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceCategoryApiTest > can show service category     
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/ServiceCategoryApiTest.php:34
     30▕         $category = ServiceCategory::factory()->create();
     31▕ 
     32▕         $response = $this->getJson("/api/v1/services/categories/{$category->id}");
     33▕ 
  ➜  34▕         $response->assertStatus(200)
     35▕             ->assertJson([
     36▕                 'data' => [
     37▕                     'id' => $category->id,
     38▕                     'name' => $category->name,

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceCategoryApiTest >…   InvalidArgumentException   
  Unknown format "string"

  at vendor/fakerphp/faker/src/Faker/Generator.php:743
    739▕                 return $this->formatters[$format];
    740▕             }
    741▕         }
    742▕ 
  ➜ 743▕         throw new \InvalidArgumentException(sprintf('Unknown format "%s"', $format));
    744▕     }
    745▕ 
    746▕     /**
    747▕      * Replaces tokens ('{{ tokenName }}') with the result from the token method call

      [2m+4 vendor frames [22m
  5   database/factories/ServiceFactory.php:48
      [2m+9 vendor frames [22m
  15  tests/Feature/ServiceCategoryApiTest.php:46

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceCategoryApiTest > can create service categor…   
  Expected response status code [201] but received 405.
Failed asserting that 405 is identical to 201.

  at tests/Feature/ServiceCategoryApiTest.php:73
     69▕         ];
     70▕ 
     71▕         $response = $this->postJson('/api/v1/services/categories', $data);
     72▕ 
  ➜  73▕         $response->assertStatus(201)
     74▕             ->assertJsonStructure(['data' => ['id', 'name', 'slug']]);
     75▕ 
     76▕         $this->assertDatabaseHas('service_categories', [
     77▕             'name' => 'Test Category',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceCategoryApiTest > can update service categor…   
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/ServiceCategoryApiTest.php:93
     89▕         ];
     90▕ 
     91▕         $response = $this->putJson("/api/v1/services/categories/{$category->id}", $data);
     92▕ 
  ➜  93▕         $response->assertStatus(200)
     94▕             ->assertJson([
     95▕                 'data' => [
     96▕                     'name' => 'Updated Category',
     97▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\ServiceCategoryApiTest > can delete service categor…   
  Expected response status code [204] but received 404.
Failed asserting that 404 is identical to 204.

  at tests/Feature/ServiceCategoryApiTest.php:112
    108▕         $category = ServiceCategory::factory()->create();
    109▕ 
    110▕         $response = $this->deleteJson("/api/v1/services/categories/{$category->id}");
    111▕ 
  ➜ 112▕         $response->assertStatus(204);
    113▕ 
    114▕         $this->assertDatabaseMissing('service_categories', [
    115▕             'id' => $category->id,
    116▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\StripeWebhookTest > can handle payment intent succe…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/stripe/web...', Array, Array, Array, Array, '{"type":"paymen...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/stripe/web...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/StripeWebhookTest.php(30): Illuminate\Foundation\Testing\TestCase->postJson('/api/stripe/web...', Array, Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\StripeWebhookTest->test_can_handle_payment_intent_succeeded_webhook()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\StripeWebhookTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/StripeWebhookTest.php:35
     31▕             'Stripe-Signature' => 'test_signature',
     32▕         ]);
     33▕ 
     34▕         // Webhook should return 200 even if processing fails (to prevent retries)
  ➜  35▕         $response->assertStatus(200);
     36▕     }
     37▕ 
     38▕     public function test_can_handle_invoice_payment_succeeded_webhook(): void
     39▕     {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\StripeWebhookTest > can handle invoice payment succ…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/stripe/web...', Array, Array, Array, Array, '{"type":"invoic...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/stripe/web...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/StripeWebhookTest.php(52): Illuminate\Foundation\Testing\TestCase->postJson('/api/stripe/web...', Array, Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\StripeWebhookTest->test_can_handle_invoice_payment_succeeded_webhook()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\StripeWebhookTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/StripeWebhookTest.php:56
     52▕         $response = $this->postJson('/api/stripe/webhook', $payload, [
     53▕             'Stripe-Signature' => 'test_signature',
     54▕         ]);
     55▕ 
  ➜  56▕         $response->assertStatus(200);
     57▕     }
     58▕ 
     59▕     public function test_can_handle_customer_subscription_created_webhook(): void
     60▕     {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\StripeWebhookTest > can handle customer subscriptio…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/stripe/web...', Array, Array, Array, Array, '{"type":"custom...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/stripe/web...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/StripeWebhookTest.php(81): Illuminate\Foundation\Testing\TestCase->postJson('/api/stripe/web...', Array, Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\StripeWebhookTest->test_can_handle_customer_subscription_created_webhook()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\StripeWebhookTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/StripeWebhookTest.php:85
     81▕         $response = $this->postJson('/api/stripe/webhook', $payload, [
     82▕             'Stripe-Signature' => 'test_signature',
     83▕         ]);
     84▕ 
  ➜  85▕         $response->assertStatus(200);
     86▕     }
     87▕ 
     88▕     public function test_can_handle_customer_subscription_deleted_webhook(): void
     89▕     {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\StripeWebhookTest > can handle customer subscriptio…   
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/stripe/web...', Array, Array, Array, Array, '{"type":"custom...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/stripe/web...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/StripeWebhookTest.php(100): Illuminate\Foundation\Testing\TestCase->postJson('/api/stripe/web...', Array, Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\StripeWebhookTest->test_can_handle_customer_subscription_deleted_webhook()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\StripeWebhookTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/StripeWebhookTest.php:104
    100▕         $response = $this->postJson('/api/stripe/webhook', $payload, [
    101▕             'Stripe-Signature' => 'test_signature',
    102▕         ]);
    103▕ 
  ➜ 104▕         $response->assertStatus(200);
    105▕     }
    106▕ 
    107▕     public function test_ignores_unknown_webhook_types(): void
    108▕     {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\StripeWebhookTest > ignores unknown webhook types      
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

Exception: Stripe API key not configured in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/StripeService.php:20
Stack trace:
#0 [internal function]: App\Services\StripeService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\St...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\St...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\St...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\St...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\St...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/stripe/web...', Array, Array, Array, Array, '{"type":"unknow...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/stripe/web...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/StripeWebhookTest.php(116): Illuminate\Foundation\Testing\TestCase->postJson('/api/stripe/web...', Array, Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\StripeWebhookTest->test_ignores_unknown_webhook_types()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\StripeWebhookTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Stripe API key not configured

  at tests/Feature/StripeWebhookTest.php:121
    117▕             'Stripe-Signature' => 'test_signature',
    118▕         ]);
    119▕ 
    120▕         // Should still return 200 to acknowledge receipt
  ➜ 121▕         $response->assertStatus(200);
    122▕     }
    123▕ }
    124▕

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SurveyApiTest > can list survey sections               
  Failed asserting that an array has the key 'title'.

  at tests/Feature/SurveyApiTest.php:21
     17▕ 
     18▕         $response = $this->getJson('/api/v1/survey/sections');
     19▕ 
     20▕         $response->assertStatus(200)
  ➜  21▕             ->assertJsonStructure([
     22▕                 'data' => [
     23▕                     '*' => ['id', 'title', 'description', 'order']
     24▕                 ]
     25▕             ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SurveyApiTest > can create survey section              
  Expected response status code [201] but received 422.
Failed asserting that 422 is identical to 201.

The following errors occurred during the last request:

{
    "errors": {
        "name": [
            "The name field is required."
        ]
    }
}

  at tests/Feature/SurveyApiTest.php:39
     35▕         ];
     36▕ 
     37▕         $response = $this->postJson('/api/v1/survey/sections', $data);
     38▕ 
  ➜  39▕         $response->assertStatus(201)
     40▕             ->assertJsonStructure(['data' => ['id', 'title', 'description']]);
     41▕ 
     42▕         $this->assertDatabaseHas('survey_sections', [
     43▕             'title' => 'Test Section',

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SurveyApiTest > can update survey section              
  Failed asserting that a row in the table [survey_sections] matches the attributes {
    "id": "019c913b-a1c3-708b-bd2b-cae349243143",
    "title": "Updated Section"
}.

Found similar results: [
    {
        "id": "019c913b-a1c3-708b-bd2b-cae349243143",
        "\"title\"": "title"
    }
].

  at tests/Feature/SurveyApiTest.php:60
     56▕         $response = $this->putJson("/api/v1/survey/sections/{$section->id}", $data);
     57▕ 
     58▕         $response->assertStatus(200);
     59▕ 
  ➜  60▕         $this->assertDatabaseHas('survey_sections', [
     61▕             'id' => $section->id,
     62▕             'title' => 'Updated Section',
     63▕         ]);
     64▕     }

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SurveyApiTest > can delete survey section              
  Expected response status code [204] but received 200.
Failed asserting that 200 is identical to 204.

  at tests/Feature/SurveyApiTest.php:72
     68▕         $section = SurveySection::factory()->create();
     69▕ 
     70▕         $response = $this->deleteJson("/api/v1/survey/sections/{$section->id}");
     71▕ 
  ➜  72▕         $response->assertStatus(204);
     73▕ 
     74▕         $this->assertDatabaseMissing('survey_sections', [
     75▕             'id' => $section->id,
     76▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\SurveyApiTest > can delete survey question             
  Expected response status code [204] but received 200.
Failed asserting that 200 is identical to 204.

  at tests/Feature/SurveyApiTest.php:141
    137▕         $question = SurveyQuestion::factory()->create();
    138▕ 
    139▕         $response = $this->deleteJson("/api/v1/survey/questions/{$question->id}");
    140▕ 
  ➜ 141▕         $response->assertStatus(204);
    142▕ 
    143▕         $this->assertDatabaseMissing('survey_questions', [
    144▕             'id' => $question->id,
    145▕         ]);

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TTSApiTest > can generate audio from text              
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/ElevenLabsService.php:15
Stack trace:
#0 [internal function]: App\Services\ElevenLabsService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\El...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\El...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\El...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\El...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\El...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/tts/gen...', Array, Array, Array, Array, '{"text":"Hello,...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/tts/gen...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/TTSApiTest.php(20): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/tts/gen...', Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\TTSApiTest->test_can_generate_audio_from_text()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\TTSApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string

  at tests/Feature/TTSApiTest.php:22
     18▕         ];
     19▕ 
     20▕         $response = $this->postJson('/api/v1/tts/generate', $data);
     21▕ 
  ➜  22▕         $response->assertStatus(200)
     23▕             ->assertJsonStructure([
     24▕                 'data' => ['audio_url', 'duration', 'text_length']
     25▕             ]);
     26▕     }

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TTSApiTest > can get generation status                 
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/TTSApiTest.php:34
     30▕         $jobId = 'test-job-id';
     31▕ 
     32▕         $response = $this->getJson("/api/v1/tts/status/{$jobId}");
     33▕ 
  ➜  34▕         $response->assertStatus(200)
     35▕             ->assertJsonStructure([
     36▕                 'data' => ['status', 'progress', 'audio_url']
     37▕             ]);
     38▕     }

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TTSApiTest > requires text for generation              
  Expected response status code [422] but received 500.
Failed asserting that 500 is identical to 422.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/ElevenLabsService.php:15
Stack trace:
#0 [internal function]: App\Services\ElevenLabsService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\El...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\El...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\El...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\El...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\El...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('POST', '/api/v1/tts/gen...', Array, Array, Array, Array, '{"voice_id":"de...')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(411): Illuminate\Foundation\Testing\TestCase->json('POST', '/api/v1/tts/gen...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/TTSApiTest.php(42): Illuminate\Foundation\Testing\TestCase->postJson('/api/v1/tts/gen...', Array)
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\TTSApiTest->test_requires_text_for_generation()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\TTSApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string

  at tests/Feature/TTSApiTest.php:46
     42▕         $response = $this->postJson('/api/v1/tts/generate', [
     43▕             'voice_id' => 'default',
     44▕         ]);
     45▕ 
  ➜  46▕         $response->assertStatus(422)
     47▕             ->assertJsonValidationErrors(['text']);
     48▕     }
     49▕ 
     50▕     public function test_can_list_available_voices(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TTSApiTest > can list available voices                 
  Expected response status code [200] but received 500.
Failed asserting that 500 is identical to 200.

The following exception occurred during the last request:

TypeError: Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string in /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/app/Services/ElevenLabsService.php:15
Stack trace:
#0 [internal function]: App\Services\ElevenLabsService->__construct()
#1 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1182): ReflectionClass->newInstanceArgs(Array)
#2 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Services\\El...')
#3 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Services\\El...', Array, true)
#4 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Services\\El...', Array)
#5 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Services\\El...', Array)
#6 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1350): Illuminate\Foundation\Application->make('App\\Services\\El...')
#7 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1249): Illuminate\Container\Container->resolveClass(Object(ReflectionParameter))
#8 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(1172): Illuminate\Container\Container->resolveDependencies(Array)
#9 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(943): Illuminate\Container\Container->build('App\\Http\\Contro...')
#10 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1078): Illuminate\Container\Container->resolve('App\\Http\\Contro...', Array, true)
#11 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Container/Container.php(874): Illuminate\Foundation\Application->resolve('App\\Http\\Contro...', Array)
#12 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Application.php(1058): Illuminate\Container\Container->make('App\\Http\\Contro...', Array)
#13 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(286): Illuminate\Foundation\Application->make('App\\Http\\Contro...')
#14 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(266): Illuminate\Routing\Route->getController()
#15 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Route.php(211): Illuminate\Routing\Route->runController()
#16 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(822): Illuminate\Routing\Route->run()
#17 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Routing\Router->{closure:Illuminate\Routing\Router::runRouteWithinStack():821}(Object(Illuminate\Http\Request))
#18 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(50): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#19 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Routing\Middleware\SubstituteBindings->handle(Object(Illuminate\Http\Request), Object(Closure))
#20 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#21 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(821): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#22 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(800): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
#23 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(764): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
#24 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Routing/Router.php(753): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
#25 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(200): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
#26 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(180): Illuminate\Foundation\Http\Kernel->{closure:Illuminate\Foundation\Http\Kernel::dispatchToRouter():197}(Object(Illuminate\Http\Request))
#27 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:Illuminate\Pipeline\Pipeline::prepareDestination():178}(Object(Illuminate\Http\Request))
#28 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#29 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
#30 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#31 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TrimStrings.php(51): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
#32 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
#33 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#34 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
#35 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/PreventRequestsDuringMaintenance.php(109): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#36 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
#37 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/HandleCors.php(61): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#38 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
#39 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/TrustProxies.php(58): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#40 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
#41 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/InvokeDeferredCallbacks.php(22): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#42 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Foundation\Http\Middleware\InvokeDeferredCallbacks->handle(Object(Illuminate\Http\Request), Object(Closure))
#43 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Http/Middleware/ValidatePathEncoding.php(26): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#44 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(219): Illuminate\Http\Middleware\ValidatePathEncoding->handle(Object(Illuminate\Http\Request), Object(Closure))
#45 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(137): Illuminate\Pipeline\Pipeline->{closure:{closure:Illuminate\Pipeline\Pipeline::carry():194}:195}(Object(Illuminate\Http\Request))
#46 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(175): Illuminate\Pipeline\Pipeline->then(Object(Closure))
#47 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(144): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
#48 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(607): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
#49 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(573): Illuminate\Foundation\Testing\TestCase->call('GET', '/api/v1/tts/voi...', Array, Array, Array, Array, '[]')
#50 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/laravel/framework/src/Illuminate/Foundation/Testing/Concerns/MakesHttpRequests.php(381): Illuminate\Foundation\Testing\TestCase->json('GET', '/api/v1/tts/voi...', Array, Array, 0)
#51 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/tests/Feature/TTSApiTest.php(52): Illuminate\Foundation\Testing\TestCase->getJson('/api/v1/tts/voi...')
#52 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(1657): Tests\Feature\TTSApiTest->test_can_list_available_voices()
#53 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(515): PHPUnit\Framework\TestCase->runTest()
#54 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestRunner/TestRunner.php(87): PHPUnit\Framework\TestCase->runBare()
#55 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestCase.php(361): PHPUnit\Framework\TestRunner->run(Object(Tests\Feature\TTSApiTest))
#56 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestCase->run()
#57 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#58 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/Framework/TestSuite.php(369): PHPUnit\Framework\TestSuite->run()
#59 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/TestRunner.php(64): PHPUnit\Framework\TestSuite->run()
#60 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/src/TextUI/Application.php(211): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\TextUI\Configuration\Configuration), Object(PHPUnit\Runner\ResultCache\DefaultResultCache), Object(PHPUnit\Framework\TestSuite))
#61 /Users/johnshine/Dropbox/Fibonacco/Learning-Center/backend/vendor/phpunit/phpunit/phpunit(104): PHPUnit\TextUI\Application->run(Array)
#62 {main}

----------------------------------------------------------------------------------

Cannot assign null to property App\Services\ElevenLabsService::$apiKey of type string

  at tests/Feature/TTSApiTest.php:54
     50▕     public function test_can_list_available_voices(): void
     51▕     {
     52▕         $response = $this->getJson('/api/v1/tts/voices');
     53▕ 
  ➜  54▕         $response->assertStatus(200)
     55▕             ->assertJsonStructure([
     56▕                 'data' => [
     57▕                     '*' => ['id', 'name', 'language', 'gender']
     58▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TrainingApiTest > can list training courses            
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/TrainingApiTest.php:16
     12▕     public function test_can_list_training_courses(): void
     13▕     {
     14▕         $response = $this->getJson('/api/v1/training/courses');
     15▕ 
  ➜  16▕         $response->assertStatus(200)
     17▕             ->assertJsonStructure([
     18▕                 'data' => [
     19▕                     '*' => ['id', 'title', 'description', 'duration']
     20▕                 ]

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TrainingApiTest > can show training course             
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/TrainingApiTest.php:32
     28▕ 
     29▕         $response = $this->getJson("/api/v1/training/courses/{$courseId}");
     30▕ 
     31▕         // Adjust assertion based on actual implementation
  ➜  32▕         $response->assertStatus(200);
     33▕     }
     34▕ 
     35▕     public function test_can_enroll_in_training_course(): void
     36▕     {

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TrainingApiTest > can enroll in training course        
  Expected response status code [201] but received 405.
Failed asserting that 405 is identical to 201.

  at tests/Feature/TrainingApiTest.php:46
     42▕         ];
     43▕ 
     44▕         $response = $this->postJson('/api/v1/training/enrollments', $data);
     45▕ 
  ➜  46▕         $response->assertStatus(201)
     47▕             ->assertJsonStructure(['data' => ['id', 'course_id', 'user_id', 'status']]);
     48▕     }
     49▕ 
     50▕     public function test_can_get_user_enrollments(): void

  ────────────────────────────────────────────────────────────────────────────  
   FAILED  Tests\Feature\TrainingApiTest > can get user enrollments             
  Expected response status code [200] but received 404.
Failed asserting that 404 is identical to 200.

  at tests/Feature/TrainingApiTest.php:56
     52▕         $userId = '00000000-0000-0000-0000-000000000000';
     53▕ 
     54▕         $response = $this->getJson("/api/v1/training/users/{$userId}/enrollments");
     55▕ 
  ➜  56▕         $response->assertStatus(200)
     57▕             ->assertJsonStructure([
     58▕                 'data' => [
     59▕                     '*' => ['id', 'course_id', 'status', 'progress']
     60▕                 ]


  Tests:    117 failed, 116 passed (598 assertions)
  Duration: 5.05s

